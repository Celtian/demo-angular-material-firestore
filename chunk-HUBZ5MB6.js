import{c as Te}from"./chunk-TL2J3R52.js";import{A as V,E as Ee,F as K,G as O,Ha as G,I as l,a as ge,e as j,hb as Z,m as me,o as Ae,u as B,va as q,w as ke}from"./chunk-KDF2MVN2.js";import{$ as S,Ba as he,Fa as f,Y as ue,ac as pe,ba as m,bc as fe,c as x,ca as $,cc as H,ea as le,fa as D,i as ae,j as ce,l as U,la as N,m as z,ta as de,ua as A}from"./chunk-CLWO35D2.js";import{f as p}from"./chunk-ZY7WU73K.js";var St="firebase",$t="11.6.0";l(St,$t,"app");var w=new pe("ANGULARFIRE2_VERSION");function X(e,t,n){if(t){if(t.length===1)return t[0];let i=t.filter(c=>c.app===n);if(i.length===1)return i[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var M=(e,t)=>{let n=t?[t]:O(),r=[];return n.forEach(o=>{o.container.getProvider(e).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r},P=function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e}(P||{}),Ie=H()&&typeof Zone<"u"?P.WARN:P.SILENT;var W=class{zone;delegate;constructor(t,n=ce){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let o=this.zone,i=function(c){o?o.runGuarded(()=>{t.apply(this,[c])}):t.apply(this,[c])};return this.delegate.schedule(i,n,r)}},v=(()=>{class e{outsideAngular;insideAngular;constructor(){let n=m(f);this.outsideAngular=n.runOutsideAngular(()=>new W(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new W(typeof Zone>"u"?void 0:Zone.current,ae))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Pe=!1;function Dt(e,t){!Pe&&(Ie>P.SILENT||H())&&(Pe=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Ie>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function Nt(e){let t=m(f,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function k(e){let t=m(f,{optional:!0});return t?t.run(()=>e()):e()}var Ot=(e,t,n)=>(...r)=>(t&&setTimeout(t,0),D(n,()=>k(()=>e.apply(void 0,r)))),E=(e,t,n)=>(n||=t?P.WARN:P.VERBOSE,function(){let r,o=arguments,i,c,u;try{i=m(v),c=m(de),u=m(le)}catch{return Dt(e,n),e.apply(this,o)}for(let s=0;s<arguments.length;s++)typeof o[s]=="function"&&(t&&(r||=k(()=>c.add())),o[s]=Ot(o[s],r,u));let a=Nt(()=>e.apply(this,o));return t?a instanceof x?a.pipe(z(i.outsideAngular),U(i.insideAngular),Te(u)):a instanceof Promise?k(()=>new Promise((s,I)=>{c.run(()=>a).then(R=>D(u,()=>k(()=>s(R))),R=>D(u,()=>k(()=>I(R))))})):typeof a=="function"&&r?function(){return setTimeout(r,0),a.apply(this,arguments)}:k(()=>a):a instanceof x?a.pipe(z(i.outsideAngular),U(i.insideAngular)):k(()=>a)});var T=class{constructor(t){return t}},C=class{constructor(){return O()}};function Wt(e){return e&&e.length===1?e[0]:new T(K())}var Y=new S("angularfire2._apps"),Mt={provide:T,useFactory:Wt,deps:[[new A,Y]]},Ft={provide:C,deps:[[new A,Y]]};function Lt(e){return(t,n)=>{let r=n.get(he);l("angularfire",w.full,"core"),l("angularfire",w.full,"app"),l("angular",fe.full,r.toString());let o=t.runOutsideAngular(()=>e(n));return new T(o)}}function wr(e,...t){return $([Mt,Ft,{provide:Y,useFactory:Lt(e),multi:!0,deps:[f,N,v,...t]}])}var vr=E(Ee,!0);var xt=new Map,Ut={activated:!1,tokenObservers:[]},zt={initialized:!1,enabled:!1};function d(e){return xt.get(e)||Object.assign({},Ut)}function Ce(){return zt}var Ht="https://content-firebaseappcheck.googleapis.com/v1";var jt="exchangeDebugToken",we={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Mr=24*60*60*1e3;var ee=class{constructor(t,n,r,o,i){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return p(this,null,function*(){this.stop();try{this.pending=new j,this.pending.promise.catch(n=>{}),yield Bt(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new j,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Bt(e){return new Promise(t=>{setTimeout(t,e)})}var Vt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},g=new Ae("appCheck","AppCheck",Vt);function be(e){if(!d(e).activated)throw g.create("use-before-activation",{appName:e.name})}function _e(r,o){return p(this,arguments,function*({url:e,body:t},n){let i={"Content-Type":"application/json"},c=n.getImmediate({optional:!0});if(c){let h=yield c.getHeartbeatsHeader();h&&(i["X-Firebase-Client"]=h)}let u={method:"POST",body:JSON.stringify(t),headers:i},a;try{a=yield fetch(e,u)}catch(h){throw g.create("fetch-network-error",{originalErrorMessage:h?.message})}if(a.status!==200)throw g.create("fetch-status-error",{httpStatus:a.status});let s;try{s=yield a.json()}catch(h){throw g.create("fetch-parse-error",{originalErrorMessage:h?.message})}let I=s.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw g.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${s.ttl}`});let R=Number(I[1])*1e3,se=Date.now();return{token:s.token,expireTimeMillis:se+R,issuedAtTimeMillis:se}})}function ye(e,t){let{projectId:n,appId:r,apiKey:o}=e.options;return{url:`${Ht}/projects/${n}/apps/${r}:${jt}?key=${o}`,body:{debug_token:t}}}var Kt="firebase-app-check-database",qt=1,te="firebase-app-check-store";var F=null;function Gt(){return F||(F=new Promise((e,t)=>{try{let n=indexedDB.open(Kt,qt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var o;t(g.create("storage-open",{originalErrorMessage:(o=r.target.error)===null||o===void 0?void 0:o.message}))},n.onupgradeneeded=r=>{let o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(te,{keyPath:"compositeKey"})}}}catch(n){t(g.create("storage-open",{originalErrorMessage:n?.message}))}}),F)}function Zt(e,t){return Xt(Yt(e),t)}function Xt(e,t){return p(this,null,function*(){let r=(yield Gt()).transaction(te,"readwrite"),i=r.objectStore(te).put({compositeKey:e,value:t});return new Promise((c,u)=>{i.onsuccess=a=>{c()},r.onerror=a=>{var s;u(g.create("storage-set",{originalErrorMessage:(s=a.target.error)===null||s===void 0?void 0:s.message}))}})})}function Yt(e){return`${e.options.appId}-${e.name}`}var b=new ke("@firebase/app-check");function J(e,t){return me()?Zt(e,t).catch(n=>{b.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Se(){return Ce().enabled}function $e(){return p(this,null,function*(){let e=Ce();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Jt={error:"UNKNOWN_ERROR"};function Qt(e){return ge.encodeString(JSON.stringify(e),!1)}function ne(e,t=!1,n=!1){return p(this,null,function*(){let r=e.app;be(r);let o=d(r),i=o.token,c;if(i&&!_(i)&&(o.token=void 0,i=void 0),!i){let s=yield o.cachedTokenPromise;s&&(_(s)?i=s:yield J(r,void 0))}if(!t&&i&&_(i))return{token:i.token};let u=!1;if(Se())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=_e(ye(r,yield $e()),e.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),u=!0);let s=yield o.exchangeTokenPromise;return yield J(r,s),o.token=s,{token:s.token}}catch(s){return s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?b.warn(s.message):n&&b.error(s),Q(s)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),u=!0),i=yield d(r).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?b.warn(s.message):n&&b.error(s),c=s}let a;return i?c?_(i)?a={token:i.token,internalError:c}:a=Q(c):(a={token:i.token},o.token=i,yield J(r,i)):a=Q(c),u&&rn(r,a),a})}function en(e){return p(this,null,function*(){let t=e.app;be(t);let{provider:n}=d(t);if(Se()){let r=yield $e(),{token:o}=yield _e(ye(t,r),e.heartbeatServiceProvider);return{token:o}}else{let{token:r}=yield n.getToken();return{token:r}}})}function tn(e,t,n,r){let{app:o}=e,i=d(o),c={next:n,error:r,type:t};if(i.tokenObservers=[...i.tokenObservers,c],i.token&&_(i.token)){let u=i.token;Promise.resolve().then(()=>{n({token:u.token}),ve(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>ve(e))}function De(e,t){let n=d(e),r=n.tokenObservers.filter(o=>o.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function ve(e){let{app:t}=e,n=d(t),r=n.tokenRefresher;r||(r=nn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function nn(e){let{app:t}=e;return new ee(()=>p(null,null,function*(){let n=d(t),r;if(n.token?r=yield ne(e,!0):r=yield ne(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=d(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,o=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,o),Math.max(0,r-Date.now())}else return 0},we.RETRIAL_MIN_WAIT,we.RETRIAL_MAX_WAIT)}function rn(e,t){let n=d(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function _(e){return e.expireTimeMillis-Date.now()>0}function Q(e){return{token:Qt(Jt),error:e}}var re=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=d(this.app);for(let n of t)De(this.app,n.next);return Promise.resolve()}};function on(e,t){return new re(e,t)}function sn(e){return{getToken:t=>ne(e,t),getLimitedUseToken:()=>en(e),addTokenListener:t=>tn(e,"INTERNAL",t),removeTokenListener:t=>De(e.app,t)}}var an="@firebase/app-check",cn="0.8.13";var un="app-check",Re="app-check-internal";function ln(){V(new B(un,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return on(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Re).initialize()})),V(new B(Re,e=>{let t=e.getProvider("app-check").getImmediate();return sn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),l(an,cn)}ln();var dn="app-check";var L=class{constructor(){return M(dn)}};var hn=["localhost","0.0.0.0","127.0.0.1"],Zr=typeof window<"u"&&hn.includes(window.location.hostname);var Ne="auth",y=class{constructor(t){return t}},oe=class{constructor(){return M(Ne)}};var ie=new S("angularfire2.auth-instances");function pn(e,t){let n=X(Ne,e,t);return n&&new y(n)}function fn(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new y(r)}}var gn={provide:oe,deps:[[new A,ie]]},mn={provide:y,useFactory:pn,deps:[[new A,ie],T]};function io(e,...t){return l("angularfire",w.full,"auth"),$([mn,gn,{provide:ie,useFactory:fn(e),multi:!0,deps:[f,N,v,C,[new A,L],...t]}])}var so=E(Z,!0);var ao=E(q,!0,2);var co=E(G,!0,2);export{w as a,X as b,M as c,v as d,E as e,T as f,C as g,wr as h,vr as i,L as j,y as k,oe as l,io as m,so as n,ao as o,co as p};
