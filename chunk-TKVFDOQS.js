import"./chunk-F5X5MWHG.js";import{a as St,b as gt,c as It}from"./chunk-GYBXU3VJ.js";import{a as at,b as ot}from"./chunk-QGAMOMZE.js";import{a as q,b as H,e as W,f as J,g as y,i as K,j as X,n as Y,o as Z,p as $,q as tt,s as et,v as it}from"./chunk-MPLI5636.js";import{a as Vt,b as Ft,c as Nt}from"./chunk-CBN4TNVY.js";import{a as Et}from"./chunk-AANAVVP7.js";import{a as Pt,b as yt,c as Tt}from"./chunk-7EF6KCBJ.js";import{x as dt}from"./chunk-PW764ZHW.js";import{a as wt,b as Dt,c as Bt,d as Ot,e as kt,f as Rt}from"./chunk-ELQTFDQR.js";import{a as Mt}from"./chunk-KDUVDR23.js";import{e as E,g as Q}from"./chunk-U5OJXBS5.js";import"./chunk-HUBZ5MB6.js";import{C as _t,D as xt,E as Ct,F as ht,a as G,p as nt,q as rt,r as lt,t as ct,w as pt,x as st}from"./chunk-TL2J3R52.js";import"./chunk-KDF2MVN2.js";import{a as vt,b as bt}from"./chunk-Z6MGJRBH.js";import{Bb as V,Cb as F,Db as N,Ib as p,J as w,Ja as i,Jb as _,Kb as P,Na as s,Nb as j,Ob as A,Pb as z,Qb as o,R as D,Rb as n,Ta as k,Za as R,ba as B,dc as L,eb as h,fb as m,gb as M,ha as b,ia as S,jb as x,kb as C,na as O,nd as mt,ob as l,od as ut,pb as c,pd as ft,qb as v,ub as g,wb as I,wc as U,xb as u}from"./chunk-CLWO35D2.js";import"./chunk-ZY7WU73K.js";var Qt=e=>[e],qt=(e,d)=>[e,d],Ht=(e,d,t)=>[e,d,t];function Wt(e,d){if(e&1){let t=g();l(0,"div",2)(1,"button",12),I("deleted",function(){b(t);let r=u(2);return S(r.onDeleted())}),p(2),o(3,"translate"),c()()}if(e&2){let t=u(2);i(),m("appPostDelete",t.dataSource.data().id),i(),P(" ",n(3,2,"uni.delete")," ")}}function Jt(e,d){if(e&1){let t=g();l(0,"button",13),o(1,"translate"),o(2,"translate"),I("click",function(){b(t);let r=u(2);return r.form.controls.title.setValue(""),S(r.form.controls.body.markAsDirty())}),l(3,"mat-icon"),p(4,"close"),c()()}e&2&&(m("matTooltip",n(1,2,"uni.clear")),h("aria-label",n(2,4,"uni.clear")))}function Kt(e,d){if(e&1){let t=g();l(0,"button",13),o(1,"translate"),o(2,"translate"),I("click",function(){b(t);let r=u(2);return r.form.controls.body.setValue(""),S(r.form.controls.body.markAsDirty())}),l(3,"mat-icon"),p(4,"close"),c()()}e&2&&(m("matTooltip",n(1,2,"uni.clear")),h("aria-label",n(2,4,"uni.clear")))}function Xt(e,d){if(e&1){let t=g();x(0,Wt,4,4,"div",2),l(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),p(4),c(),l(5,"mat-card-title"),p(6),c()(),l(7,"mat-card-content",3)(8,"form",4),I("ngSubmit",function(){b(t);let r=u();return S(r.onSubmit())})("reset",function(r){b(t);let f=u();return S(f.onReset(r))}),l(9,"mat-form-field",5)(10,"mat-label"),p(11),o(12,"translate"),c(),v(13,"input",6),x(14,Jt,5,6,"button",7),c(),l(15,"mat-form-field",5)(16,"mat-label"),p(17),o(18,"translate"),c(),v(19,"textarea",8,0),o(21,"translate"),x(22,Kt,5,6,"button",7),c(),l(23,"div",9)(24,"button",10),p(25),o(26,"translate"),c(),l(27,"button",11),p(28),o(29,"translate"),c()()()()()}if(e&2){let t=u();C(t.dataSource.state()==="data"?0:-1),i(3),M("blur-sm",t.dataSource.state()!=="data"),i(),_("#"+t.dataSource.data().id),i(),M("blur-sm",t.dataSource.state()!=="data"),i(),_(t.dataSource.data().title),i(2),m("formGroup",t.form),i(3),_(n(12,17,"form.post.title.label")),i(3),C(t.form.controls.title.value?14:-1),i(3),_(n(18,19,"form.post.body.label")),i(2),m("placeholder",n(21,21,"form.post.body.placeholder")),i(3),C(t.form.controls.body.value?22:-1),i(2),m("disabled",t.form.pristine),i(),P(" ",n(26,23,"uni.reset")," "),i(2),m("disabled",t.form.pristine||t.form.invalid),i(),P(" ",n(29,25,"uni.submit")," ")}}function Yt(e,d){if(e&1&&(l(0,"mat-card")(1,"mat-card-content",14),v(2,"mat-icon",15),o(3,"translate"),l(4,"div"),p(5),c()()()),e&2){let t=u();i(2),h("aria-label",n(3,2,"uni.aria-label.error-icon")),i(3),_(t.dataSource.error())}}function Zt(e,d){e&1&&(l(0,"mat-card")(1,"mat-card-content",14),v(2,"mat-icon",16),o(3,"translate"),l(4,"div"),p(5),o(6,"translate"),c()()()),e&2&&(i(2),h("aria-label",n(3,2,"uni.aria-label.warning-icon")),i(3),_(n(6,4,"error.post-was-not-found")))}function $t(e,d){if(e&1&&(v(0,"mat-icon",19),o(1,"translate"),l(2,"a",18),o(3,"localize"),p(4),c(),v(5,"mat-icon",19),o(6,"translate"),l(7,"a",18),o(8,"localize"),o(9,"localize"),p(10),o(11,"translate"),c()),e&2){let t=u(2);h("aria-label",n(1,6,"uni.aria-label.arrow-icon")),i(2),m("routerLink",A(18,qt,n(3,8,"/"+t.ROUTE_DEFINITION.APP.POSTS),t.dataSource.data().id)),i(2),_(t.dataSource.data().id),i(),h("aria-label",n(6,10,"uni.aria-label.arrow-icon")),i(2),m("routerLink",z(21,Ht,n(8,12,"/"+t.ROUTE_DEFINITION.APP.POSTS),t.dataSource.data().id,n(9,14,t.ROUTE_DEFINITION.POSTS.EDIT))),i(3),P(" ",n(11,16,"breadcrumbs.posts.edit"))}}function te(e,d){if(e&1&&(l(0,"div",17)(1,"a",18),o(2,"localize"),p(3),o(4,"translate"),c(),x(5,$t,12,25),c()),e&2){let t=u();i(),m("routerLink",j(7,Qt,n(2,3,"/"+t.ROUTE_DEFINITION.APP.POSTS))),i(2),_(n(4,5,"breadcrumbs.app.posts")),i(2),C(t.dataSource.state()==="data"?5:-1)}}var Ue=(()=>{let d=class d{constructor(a,r,f,T,jt,At,zt,Lt,Ut,Gt){this.breadcrumbsPortalService=a,this.cdr=r,this.confirm=f,this.fb=T,this.route=jt,this.apiService=At,this.translate=zt,this.lr=Lt,this.snackBar=Ut,this.router=Gt,this.destroyRef=B(O),this.dataSource=new Vt(Ft),this.ROUTE_DEFINITION=ht,this.form=this.fb.nonNullable.group({title:["",[y.required,y.min(3)]],body:["",[y.required,y.min(3)]]})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(Pt.UnsavedWork)}ngOnDestroy(){this.portalContent?.detach()}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent),this.cdr.markForCheck()}),this.route.paramMap.pipe(Nt(),D(a=>this.apiService.detail(a)),G(this.destroyRef)).subscribe({next:a=>{this.dataSource.setData(a),this.form.patchValue(a)},error:()=>{let a=this.translate.instant("error.unexpected-exception");this.dataSource.setError(a)}})}onSubmit(){this.apiService.patch(this.dataSource.data().id,this.form.value).pipe(w()).subscribe({next:a=>{this.dataSource.setData(a),this.form.reset(a),this.snackBar.open(this.translate.instant("response.update.success"),this.translate.instant("uni.close"))},error:()=>{this.snackBar.open(this.translate.instant("response.update.failed"),this.translate.instant("uni.close"))}})}onReset(a){a.preventDefault(),this.form.reset(this.dataSource.data())}onDeleted(){let a=this.lr.translateRoute("/");this.router.navigate([a])}};d.\u0275fac=function(r){return new(r||d)(s(Mt),s(L),s(yt),s(tt),s(ct),s(Tt),s(mt),s(_t),s(dt),s(pt))},d.\u0275cmp=k({type:d,selectors:[["app-post-edit"]],viewQuery:function(r,f){if(r&1&&V(E,7),r&2){let T;F(T=N())&&(f.portalContent=T.first)}},decls:4,vars:3,consts:[["autosize","cdkTextareaAutosize"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],[1,"flex","items-end","justify-end","gap-2"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-button","","color","accent",3,"deleted","appPostDelete"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","fontIcon","error"],["aria-hidden","false","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(r,f){r&1&&(x(0,Xt,30,27),x(1,Yt,6,4,"mat-card"),x(2,Zt,7,6,"mat-card"),R(3,te,6,9,"div",1)),r&2&&(C(f.dataSource.state()==="loading"||f.dataSource.state()==="data"?0:-1),i(),C(f.dataSource.state()==="error"?1:-1),i(),C(f.dataSource.state()==="empty"?2:-1))},dependencies:[U,Ct,xt,lt,rt,nt,Rt,wt,Bt,kt,Ot,Dt,it,W,q,H,bt,vt,ot,at,It,gt,St,Q,E,et,Y,J,K,X,Z,$,st,ft,ut,Et],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let e=d;return e})();export{Ue as PostEditComponent};
