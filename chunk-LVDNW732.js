import{B as V,C as X,D as x,E as D,F as Y,G as b,I as Z,J as _,K as tt,L as et,M as k,n as S,o as $,p as A,q as L,r as U,s as W,t as z,u as G,y as N,z as Q}from"./chunk-4CYMFQ55.js";import{a as O,d as P}from"./chunk-FE6K5YNT.js";import{Eb as E,Id as H,Jb as j,Jd as J,Kb as w,Kd as K,Ma as s,Na as I,O as q,W as y,Za as M,ba as l,ga as p,ha as R,ia as B,ib as m,jb as f,o as a,u as n,v as F,yb as u,zb as h}from"./chunk-NRVZXI7R.js";import{a as c}from"./chunk-OYL2YZNW.js";var it=(()=>{let i=class i{constructor(t,e){this.data=t,this.dialogRef=e}};i.\u0275fac=function(e){return new(e||i)(I($),I(S))},i.\u0275cmp=B({type:i,selectors:[["app-confirm-dialog"]],standalone:!0,features:[E],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,r){e&1&&(m(0,"h1",0),u(1),f(),m(2,"div",1),u(3),f(),m(4,"div",2)(5,"button",3),u(6),j(7,"translate"),f(),m(8,"button",4),u(9),j(10,"translate"),f()()),e&2&&(s(1),h(r.data.title),s(2),h(r.data.content),s(2),M("mat-dialog-close",!1),s(1),h(w(7,6,"uni.no")),s(2),M("mat-dialog-close",!0),s(1),h(w(10,8,"uni.yes")))},dependencies:[G,L,U,z,W,P,O,K,J],changeDetection:0});let o=i;return o})();var ot=(()=>{let i=class i{constructor(t){this.dialog=t}open(t,e){return this.dialog.open(it,{width:"sm",data:{title:t,content:e}}).afterClosed()}};i.\u0275fac=function(e){return new(e||i)(p(A))},i.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var g=function(o){return o[o.Delete=0]="Delete",o[o.UnsavedWork=1]="UnsavedWork",o}(g||{}),Dt=(()=>{let i=class i{constructor(t,e){this.confirm=t,this.translate=e}openCustomConfirmDialog(t){let e=this.getTitle(t),r=this.getContent(t);return this.open(e,r)}getTitle(t){switch(t){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(t){switch(t){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(t,e){return this.confirm.open(t,e).pipe(q(),n(r=>!!r))}};i.\u0275fac=function(e){return new(e||i)(p(ot),p(H))},i.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var bt=(()=>{let i=class i{constructor(){this.firestore=R(Q)}list(t){let e=x(this.firestore,"posts"),r=[_(t.sort,t.order),Z(t.limit)];t.query&&r.push(k(t.sort,">=",t.query.toLowerCase()),k(t.sort,"<=",t.query.toLowerCase()+"\uF8FF"));let rt=tt(e,...r),nt=a(b(e)).pipe(n(d=>d.size)),at=a(b(rt)).pipe(n(d=>{let v=[];return d.forEach(C=>{let st=C.data();v.push(c({id:C.id},st))}),v}));return F([nt,at]).pipe(n(([d,v])=>({items:v,totalCount:d})))}create(t){return a(X(x(this.firestore,"posts"),c({},t))).pipe(y(e=>a(Y(e))),n(e=>{let r=e.data();return c({id:e.id},r)}))}detail(t){let e=D(this.firestore,`posts/${t}`);return V(e).pipe(n(r=>c({id:t},r)))}delete(t){let e=D(this.firestore,`posts/${t}`);return a(N(e)).pipe(n(()=>{}))}patch(t,e){let r=D(this.firestore,`posts/${t}`);return a(et(r,c({},e))).pipe(y(()=>this.detail(t)))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();export{g as a,Dt as b,bt as c};
