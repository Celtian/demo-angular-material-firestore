import{a as Ct,b as ht,c as bt}from"./chunk-C2FHO6H6.js";import{a as tt,b as et}from"./chunk-UGOOXKEB.js";import{a as U,b as q,e as G,f as j,g as E,i as Q,j as H,n as W,o as J,p as K,q as X,s as Y,v as Z}from"./chunk-OG3AC664.js";import{a as Bt,b as Ot,c as kt}from"./chunk-QH4XOTWV.js";import{a as Pt}from"./chunk-YNOP67ZG.js";import{a as vt,b as St,c as gt}from"./chunk-OTXFFOIG.js";import{x as ot}from"./chunk-M22OCP3J.js";import{a as Et,b as Tt,c as Mt,d as It,e as wt,f as Dt}from"./chunk-2OISK5HH.js";import{a as yt}from"./chunk-MSFTQ3BT.js";import{e as y,g as L}from"./chunk-2QRBLLPX.js";import"./chunk-KJ45J5GU.js";import{$ as mt,O as $,P as it,Q as at,S as nt,V as rt,W as lt,a as z,aa as ct,ba as ut,ca as ft}from"./chunk-WPSOSJMH.js";import"./chunk-UH5WVR5Y.js";import{a as _t,b as xt}from"./chunk-6DFGMJV5.js";import{$b as N,Cb as S,Eb as g,Gb as u,J as M,Ma as i,Ob as O,Pb as k,Q as I,Rb as T,Tb as d,Ub as f,Vb as P,Ya as D,Yc as dt,Zb as R,Zc as pt,_b as F,_c as st,ac as a,bc as o,cb as B,da as s,ia as b,ja as v,kc as V,mb as C,nb as _,nc as A,oa as w,ob as x,sb as c,tb as n,ub as l,vb as h}from"./chunk-HDFNOJJK.js";import"./chunk-Q7L6LLAK.js";var Ft=e=>[e],Nt=(e,m)=>[e,m],Vt=(e,m,t)=>[e,m,t];function At(e,m){if(e&1){let t=S();n(0,"div",2)(1,"button",12),g("deleted",function(){b(t);let r=u(2);return v(r.onDeleted())}),d(2),a(3,"translate"),l()()}if(e&2){let t=u(2);i(),c("appPostDelete",t.dataSource.data().id),i(),P(" ",o(3,2,"uni.delete")," ")}}function zt(e,m){if(e&1){let t=S();n(0,"button",13),a(1,"translate"),a(2,"translate"),g("click",function(){b(t);let r=u(2);return r.form.controls.title.setValue(""),v(r.form.controls.body.markAsDirty())}),n(3,"mat-icon"),d(4,"close"),l()()}e&2&&(c("matTooltip",o(1,2,"uni.clear")),C("aria-label",o(2,4,"uni.clear")))}function Lt(e,m){if(e&1){let t=S();n(0,"button",13),a(1,"translate"),a(2,"translate"),g("click",function(){b(t);let r=u(2);return r.form.controls.body.setValue(""),v(r.form.controls.body.markAsDirty())}),n(3,"mat-icon"),d(4,"close"),l()()}e&2&&(c("matTooltip",o(1,2,"uni.clear")),C("aria-label",o(2,4,"uni.clear")))}function Ut(e,m){if(e&1){let t=S();_(0,At,4,4,"div",2),n(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),d(4),l(),n(5,"mat-card-title"),d(6),l()(),n(7,"mat-card-content",3)(8,"form",4),g("ngSubmit",function(){b(t);let r=u();return v(r.onSubmit())})("reset",function(r){b(t);let Rt=u();return v(Rt.onReset(r))}),n(9,"mat-form-field",5)(10,"mat-label"),d(11),a(12,"translate"),l(),h(13,"input",6),_(14,zt,5,6,"button",7),l(),n(15,"mat-form-field",5)(16,"mat-label"),d(17),a(18,"translate"),l(),h(19,"textarea",8,0),a(21,"translate"),_(22,Lt,5,6,"button",7),l(),n(23,"div",9)(24,"button",10),d(25),a(26,"translate"),l(),n(27,"button",11),d(28),a(29,"translate"),l()()()()()}if(e&2){let t=u();x(t.dataSource.state()==="data"?0:-1),i(3),T("blur-sm",t.dataSource.state()!=="data"),i(),f("#"+t.dataSource.data().id),i(),T("blur-sm",t.dataSource.state()!=="data"),i(),f(t.dataSource.data().title),i(2),c("formGroup",t.form),i(3),f(o(12,17,"form.post.title.label")),i(3),x(t.form.controls.title.value?14:-1),i(3),f(o(18,19,"form.post.body.label")),i(2),c("placeholder",o(21,21,"form.post.body.placeholder")),i(3),x(t.form.controls.body.value?22:-1),i(2),c("disabled",t.form.pristine),i(),P(" ",o(26,23,"uni.reset")," "),i(2),c("disabled",t.form.pristine||t.form.invalid),i(),P(" ",o(29,25,"uni.submit")," ")}}function qt(e,m){if(e&1&&(n(0,"mat-card")(1,"mat-card-content",14),h(2,"mat-icon",15),a(3,"translate"),n(4,"div"),d(5),l()()()),e&2){let t=u();i(2),C("aria-label",o(3,2,"uni.aria-label.error-icon")),i(3),f(t.dataSource.error())}}function Gt(e,m){e&1&&(n(0,"mat-card")(1,"mat-card-content",14),h(2,"mat-icon",16),a(3,"translate"),n(4,"div"),d(5),a(6,"translate"),l()()()),e&2&&(i(2),C("aria-label",o(3,2,"uni.aria-label.warning-icon")),i(3),f(o(6,4,"error.post-was-not-found")))}function jt(e,m){if(e&1&&(h(0,"mat-icon",19),a(1,"translate"),n(2,"a",18),a(3,"localize"),d(4),l(),h(5,"mat-icon",19),a(6,"translate"),n(7,"a",18),a(8,"localize"),a(9,"localize"),d(10),a(11,"translate"),l()),e&2){let t=u(2);C("aria-label",o(1,6,"uni.aria-label.arrow-icon")),i(2),c("routerLink",F(18,Nt,o(3,8,"/"+t.ROUTE_DEFINITION.APP.POSTS),t.dataSource.data().id)),i(2),f(t.dataSource.data().id),i(),C("aria-label",o(6,10,"uni.aria-label.arrow-icon")),i(2),c("routerLink",N(21,Vt,o(8,12,"/"+t.ROUTE_DEFINITION.APP.POSTS),t.dataSource.data().id,o(9,14,t.ROUTE_DEFINITION.POSTS.EDIT))),i(3),P(" ",o(11,16,"breadcrumbs.posts.edit"))}}function Qt(e,m){if(e&1&&(n(0,"div",17)(1,"a",18),a(2,"localize"),d(3),a(4,"translate"),l(),_(5,jt,12,25),l()),e&2){let t=u();i(),c("routerLink",R(7,Ft,o(2,3,"/"+t.ROUTE_DEFINITION.APP.POSTS))),i(2),f(o(4,5,"breadcrumbs.app.posts")),i(2),x(t.dataSource.state()==="data"?5:-1)}}var we=(()=>{class e{constructor(){this.breadcrumbsPortalService=s(yt),this.cdr=s(A),this.confirm=s(gt),this.fb=s(X),this.route=s(nt),this.apiService=s(vt),this.translate=s(dt),this.lr=s(mt),this.snackBar=s(ot),this.router=s(rt),this.portalContent=V.required(y),this.destroyRef=s(w),this.dataSource=new Bt(Ot),this.ROUTE_DEFINITION=ft,this.form=this.fb.nonNullable.group({title:["",[E.required,E.min(3)]],body:["",[E.required,E.min(3)]]})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(St.UnsavedWork)}ngOnDestroy(){this.portalContent()?.detach()}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent()),this.cdr.markForCheck()}),this.route.paramMap.pipe(kt(),I(t=>this.apiService.detail(t)),z(this.destroyRef)).subscribe({next:t=>{this.dataSource.setData(t),this.form.patchValue(t)},error:()=>{let t=this.translate.instant("error.unexpected-exception");this.dataSource.setError(t)}})}onSubmit(){this.apiService.patch(this.dataSource.data().id,this.form.value).pipe(M()).subscribe({next:t=>{this.dataSource.setData(t),this.form.reset(t),this.snackBar.open(this.translate.instant("response.update.success"),this.translate.instant("uni.close"))},error:()=>{this.snackBar.open(this.translate.instant("response.update.failed"),this.translate.instant("uni.close"))}})}onReset(t){t.preventDefault(),this.form.reset(this.dataSource.data())}onDeleted(){let t=this.lr.translateRoute("/");this.router.navigate([t])}static{this.\u0275fac=function(p){return new(p||e)}}static{this.\u0275cmp=D({type:e,selectors:[["app-post-edit"]],viewQuery:function(p,r){p&1&&O(r.portalContent,y,5),p&2&&k()},decls:4,vars:3,consts:[["autosize","cdkTextareaAutosize"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],[1,"flex","items-end","justify-end","gap-2"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-button","","color","accent",3,"deleted","appPostDelete"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","fontIcon","error"],["aria-hidden","false","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(p,r){p&1&&(_(0,Ut,30,27),_(1,qt,6,4,"mat-card"),_(2,Gt,7,6,"mat-card"),B(3,Qt,6,9,"div",1)),p&2&&(x(r.dataSource.state()==="loading"||r.dataSource.state()==="data"?0:-1),i(),x(r.dataSource.state()==="error"?1:-1),i(),x(r.dataSource.state()==="empty"?2:-1))},dependencies:[ut,at,it,$,Dt,Et,Mt,wt,It,Tt,Z,G,U,q,xt,_t,et,tt,bt,ht,Ct,L,y,Y,W,j,Q,H,K,J,lt,st,Pt,ct,pt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media(min-width:640px){[_nghost-%COMP%]{max-width:640px}}@media(min-width:768px){[_nghost-%COMP%]{max-width:768px}}@media(min-width:1024px){[_nghost-%COMP%]{max-width:1024px}}@media(min-width:1280px){[_nghost-%COMP%]{max-width:1280px}}@media(min-width:1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0})}}return e})();export{we as PostEditComponent};
