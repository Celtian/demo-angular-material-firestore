import"./chunk-F5X5MWHG.js";import{a as ft,b as ht,c as Ct}from"./chunk-5YRGQ7T2.js";import{a as Y,b as Z}from"./chunk-QIKGZEXE.js";import{a as A,b as L,e as U,f as G,g as b,i as Q,j as q,l as B,n as H,o as W,p as J,q as K,s as X}from"./chunk-YIOYL63O.js";import{a as vt,b as bt,c as _t}from"./chunk-TEXFYWTQ.js";import{x as it}from"./chunk-4PSRBR6V.js";import{a as gt,b as It,c as Mt,e as St,f as yt}from"./chunk-ZI5R7TII.js";import{a as xt}from"./chunk-F5JM2YIJ.js";import{e as S,g as z}from"./chunk-WB3MKCAA.js";import"./chunk-FKERN7XC.js";import{C as mt,D as pt,E as st,F as ct,p as $,q as tt,r as et,w as rt,x as ot}from"./chunk-KQXRTZRU.js";import"./chunk-KDF2MVN2.js";import{a as dt,b as ut}from"./chunk-EVIVI27L.js";import{Ea as t,Gb as s,Hb as h,Ia as p,Ib as O,J as E,Mb as k,Pa as N,Pb as i,Qb as r,Va as D,cc as j,db as _,eb as T,fb as w,ga as C,ha as v,jb as d,kb as n,lb as l,mb as x,md as at,nd as nt,od as lt,qb as g,sb as I,tb as M,xb as R,yb as V,zb as F}from"./chunk-FD5RQM4Y.js";import"./chunk-ZY7WU73K.js";var Pt=o=>[o];function kt(o,c){if(o&1){let u=g();n(0,"button",11),i(1,"translate"),i(2,"translate"),I("click",function(){C(u);let e=M();return v(e.form.controls.title.setValue(""))}),n(3,"mat-icon"),s(4,"close"),l()()}o&2&&(d("matTooltip",r(1,2,"uni.clear")),_("aria-label",r(2,4,"uni.clear")))}function Bt(o,c){if(o&1){let u=g();n(0,"button",11),i(1,"translate"),i(2,"translate"),I("click",function(){C(u);let e=M();return v(e.form.controls.body.setValue(""))}),n(3,"mat-icon"),s(4,"close"),l()()}o&2&&(d("matTooltip",r(1,2,"uni.clear")),_("aria-label",r(2,4,"uni.clear")))}function Et(o,c){if(o&1&&(n(0,"div",12)(1,"a",13),i(2,"localize"),s(3),i(4,"translate"),l(),x(5,"mat-icon",14),i(6,"translate"),n(7,"a",13),i(8,"localize"),s(9),i(10,"translate"),l()()),o&2){let u=M();t(),d("routerLink",k(15,Pt,r(2,5,"/"+u.ROUTE_DEFINITION.APP.POSTS))),t(2),h(r(4,7,"breadcrumbs.app.posts")),t(2),_("aria-label",r(6,9,"uni.aria-label.arrow-icon")),t(2),d("routerLink",k(17,Pt,r(8,11,"/"+u.ROUTE_DEFINITION.APP.POSTS+"/"+ +u.ROUTE_DEFINITION.POSTS.CREATE))),t(2),h(r(10,13,"breadcrumbs.posts.create"))}}var pe=(()=>{let c=class c{constructor(m,e,a,f,y,P,Tt,wt,Ot){this.apiService=m,this.breadcrumbsPortalService=e,this.fb=a,this.snackBar=f,this.router=y,this.lr=P,this.translate=Tt,this.confirm=wt,this.cdr=Ot,this.ROUTE_DEFINITION=ct,this.form=this.fb.group({title:new B("",{nonNullable:!0,validators:[b.required,b.min(3)]}),body:new B("",{nonNullable:!0,validators:[b.required,b.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(vt.UnsavedWork)}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent),this.cdr.markForCheck()})}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(E()).subscribe({next:m=>{this.form.reset(m),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let e=this.lr.translateRoute("/");this.router.navigate([e])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(m){m.preventDefault(),this.form.reset()}};c.\u0275fac=function(e){return new(e||c)(p(_t),p(xt),p(K),p(it),p(rt),p(mt),p(at),p(bt),p(j))},c.\u0275cmp=N({type:c,selectors:[["app-post-create"]],viewQuery:function(e,a){if(e&1&&R(S,7),e&2){let f;V(f=F())&&(a.portalContent=f.first)}},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(e,a){if(e&1){let f=g();n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s(3),l()(),n(4,"mat-card-content",1)(5,"form",2),I("ngSubmit",function(){return C(f),v(a.onSubmit())})("reset",function(P){return C(f),v(a.onReset(P))}),n(6,"mat-form-field",3)(7,"mat-label"),s(8),i(9,"translate"),l(),x(10,"input",4),T(11,kt,5,6,"button",5),l(),n(12,"mat-form-field",3)(13,"mat-label"),s(14),i(15,"translate"),l(),x(16,"textarea",6,0),i(18,"translate"),T(19,Bt,5,6,"button",5),l(),n(20,"div",7)(21,"button",8),s(22),i(23,"translate"),l(),n(24,"button",9),s(25),i(26,"translate"),l()()()()(),D(27,Et,11,19,"div",10)}e&2&&(t(3),h(a.form.controls.title.value),t(2),d("formGroup",a.form),t(3),h(r(9,11,"form.post.title.label")),t(3),w(a.form.controls.title.value?11:-1),t(3),h(r(15,13,"form.post.body.label")),t(2),d("placeholder",r(18,15,"form.post.body.placeholder")),t(3),w(a.form.controls.body.value?19:-1),t(2),d("disabled",a.form.pristine),t(),O(" ",r(23,17,"uni.reset")," "),t(2),d("disabled",a.form.pristine||a.form.invalid),t(),O(" ",r(26,19,"uni.submit")," "))},dependencies:[X,H,G,Q,q,W,J,yt,gt,Mt,St,It,ut,dt,Ct,ht,U,A,L,ft,et,tt,$,Z,Y,z,S,lt,nt,ot,st,pt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let o=c;return o})();export{pe as PostCreateComponent};
