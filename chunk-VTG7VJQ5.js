import{a as gt,b as It,c as Pt}from"./chunk-54Q6HFBA.js";import{a as rt,b as lt}from"./chunk-RIZW4TRM.js";import{a as J,b as K,e as X,f as Y,g as Z,h as P,j as $,k as tt,o as et,p as it,q as at,r as ot,t as nt}from"./chunk-DED2DYRV.js";import{a as Vt,b as Nt,c as jt}from"./chunk-AB5ILHOS.js";import{a as Tt}from"./chunk-YQ7WFSG6.js";import{a as yt,b as Et,c as Mt}from"./chunk-LVDNW732.js";import{w as dt}from"./chunk-4CYMFQ55.js";import{a as Dt,b as Ot,c as kt,d as Bt,e as Rt,f as Ft}from"./chunk-XU3K4MMF.js";import{a as vt}from"./chunk-ERMFD4D4.js";import{a as wt}from"./chunk-JADWWDIP.js";import{e as E,g as G}from"./chunk-KZZ6WVID.js";import"./chunk-DFMYIP6B.js";import{a as Q,b as q,c as W,d as H,f as mt,i as st,j as ct,o as _t,p as xt,q as ht,r as Ct}from"./chunk-FE6K5YNT.js";import"./chunk-DSYF4QHV.js";import{a as St,b as bt}from"./chunk-VUZ3B7TP.js";import{$a as T,Ab as I,Eb as F,Gb as V,Hb as N,Ib as j,Id as pt,Jb as d,Jd as ut,Kb as m,Kd as ft,Ma as i,Na as c,O as w,Ob as A,Pa as B,Pb as z,Qa as R,Rb as L,W as D,Ya as M,Za as p,db as S,eb as x,ha as O,ia as k,ib as n,jb as l,kb as h,na as C,oa as v,ob as b,rc as U,sb as g,ub as u,yb as s,zb as _}from"./chunk-NRVZXI7R.js";import"./chunk-OYL2YZNW.js";function qt(e,r){if(e&1){let t=b();n(0,"div",12)(1,"button",13),g("deleted",function(){C(t);let o=u(2);return v(o.onDeleted())}),s(2),d(3,"translate"),l()()}if(e&2){let t=u(2);i(1),p("appPostDelete",t.dataSource.data().id),i(1),I(" ",m(3,2,"uni.delete")," ")}}function Wt(e,r){if(e&1){let t=b();n(0,"button",14),g("click",function(){C(t);let o=u(2);return o.form.controls.title.setValue(""),v(o.form.controls.body.markAsDirty())}),d(1,"translate"),d(2,"translate"),n(3,"mat-icon"),s(4,"close"),l()()}e&2&&(p("matTooltip",m(2,4,"uni.clear")),M("aria-label",m(1,2,"uni.clear")))}function Ht(e,r){if(e&1){let t=b();n(0,"button",14),g("click",function(){C(t);let o=u(2);return o.form.controls.body.setValue(""),v(o.form.controls.body.markAsDirty())}),d(1,"translate"),d(2,"translate"),n(3,"mat-icon"),s(4,"close"),l()()}e&2&&(p("matTooltip",m(2,4,"uni.clear")),M("aria-label",m(1,2,"uni.clear")))}function Jt(e,r){if(e&1){let t=b();S(0,qt,4,4,"div",1),n(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),s(4),l(),n(5,"mat-card-title"),s(6),l()(),n(7,"mat-card-content",2)(8,"form",3),g("ngSubmit",function(){C(t);let o=u();return v(o.onSubmit())})("reset",function(o){C(t);let f=u();return v(f.onReset(o))}),n(9,"mat-form-field",4)(10,"mat-label"),s(11),d(12,"translate"),l(),h(13,"input",5),S(14,Wt,5,6,"button",6),l(),n(15,"mat-form-field",4)(16,"mat-label"),s(17),d(18,"translate"),l(),h(19,"textarea",7,8),d(21,"translate"),S(22,Ht,5,6,"button",6),l(),n(23,"div",9)(24,"button",10),s(25),d(26,"translate"),l(),n(27,"button",11),s(28),d(29,"translate"),l()()()()()}if(e&2){let t=u();x(0,t.dataSource.state()==="data"?0:-1),i(3),T("blur-sm",t.dataSource.state()!=="data"),i(1),_("#"+t.dataSource.data().id),i(1),T("blur-sm",t.dataSource.state()!=="data"),i(1),_(t.dataSource.data().title),i(2),p("formGroup",t.form),i(3),_(m(12,17,"form.post.title.label")),i(3),x(14,t.form.controls.title.value?14:-1),i(3),_(m(18,19,"form.post.body.label")),i(2),p("placeholder",m(21,21,"form.post.body.placeholder")),i(3),x(22,t.form.controls.body.value?22:-1),i(2),p("disabled",t.form.pristine),i(1),I(" ",m(26,23,"uni.reset")," "),i(2),p("disabled",t.form.pristine||t.form.invalid),i(1),I(" ",m(29,25,"uni.submit")," ")}}function Kt(e,r){if(e&1&&(n(0,"mat-card")(1,"mat-card-content",15),h(2,"mat-icon",16),n(3,"div"),s(4),l()()()),e&2){let t=u();i(4),_(t.dataSource.error())}}function Xt(e,r){e&1&&(n(0,"mat-card")(1,"mat-card-content",15),h(2,"mat-icon",17),n(3,"div"),s(4),d(5,"translate"),l()()()),e&2&&(i(4),_(m(5,1,"error.post-was-not-found")))}var Yt=(e,r)=>[e,r],Zt=(e,r,t)=>[e,r,t];function $t(e,r){if(e&1&&(h(0,"mat-icon",20),n(1,"a",19),d(2,"localize"),s(3),l(),h(4,"mat-icon",20),n(5,"a",19),d(6,"localize"),d(7,"localize"),s(8),d(9,"translate"),l()),e&2){let t=u(2);i(1),p("routerLink",N(12,Yt,m(2,4,"/"+t.ROUTE_DEFINITION.APP.POSTS),t.dataSource.data().id)),i(2),_(t.dataSource.data().id),i(2),p("routerLink",j(15,Zt,m(6,6,"/"+t.ROUTE_DEFINITION.APP.POSTS),t.dataSource.data().id,m(7,8,t.ROUTE_DEFINITION.POSTS.EDIT))),i(3),I(" ",m(9,10,"breadcrumbs.posts.edit"),"")}}var te=e=>[e];function ee(e,r){if(e&1&&(n(0,"div",18)(1,"a",19),d(2,"localize"),s(3),d(4,"translate"),l(),S(5,$t,10,19),l()),e&2){let t=u();i(1),p("routerLink",V(7,te,m(2,3,"/"+t.ROUTE_DEFINITION.APP.POSTS))),i(2),_(m(4,5,"breadcrumbs.app.posts")),i(2),x(5,t.dataSource.state()==="data"?5:-1)}}var Ge=(()=>{let r=class r{constructor(a,o,f,y,At,zt,Lt,Ut,Gt,Qt){this.breadcrumbsPortalService=a,this.cdr=o,this.confirm=f,this.fb=y,this.route=At,this.apiService=zt,this.translate=Lt,this.lr=Ut,this.snackBar=Gt,this.router=Qt,this.destroyRef=O(R),this.dataSource=new Vt(Nt),this.ROUTE_DEFINITION=Ct,this.form=this.fb.nonNullable.group({title:["",[P.required,P.min(3)]],body:["",[P.required,P.min(3)]]})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(yt.UnsavedWork)}ngOnDestroy(){this.portalContent?.detach()}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent),this.cdr.markForCheck()}),this.route.paramMap.pipe(jt(),D(a=>this.apiService.detail(a)),vt(this.destroyRef)).subscribe({next:a=>{this.dataSource.setData(a),this.form.patchValue(a)},error:()=>{let a=this.translate.instant("error.unexpected-exception");this.dataSource.setError(a)}})}onSubmit(){this.apiService.patch(this.dataSource.data().id,this.form.value).pipe(w()).subscribe({next:a=>{this.dataSource.setData(a),this.form.reset(a),this.snackBar.open(this.translate.instant("response.update.success"),this.translate.instant("uni.close"))},error:()=>{this.snackBar.open(this.translate.instant("response.update.failed"),this.translate.instant("uni.close"))}})}onReset(a){a.preventDefault(),this.form.reset(this.dataSource.data())}onDeleted(){let a=this.lr.translateRoute("/");this.router.navigate([a])}};r.\u0275fac=function(o){return new(o||r)(c(wt),c(B),c(Et),c(ot),c(mt),c(Mt),c(pt),c(_t),c(dt),c(st))},r.\u0275cmp=k({type:r,selectors:[["app-post-edit"]],viewQuery:function(o,f){if(o&1&&z(E,7),o&2){let y;A(y=L())&&(f.portalContent=y.first)}},standalone:!0,features:[F],decls:4,vars:3,consts:[["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["class","flex items-end justify-end gap-2"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"formGroup","ngSubmit","reset"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],["autosize","cdkTextareaAutosize"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[1,"flex","items-end","justify-end","gap-2"],["mat-button","","color","accent",3,"appPostDelete","deleted"],["matSuffix","","mat-icon-button","",3,"matTooltip","click"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","aria-label","Error icon","fontIcon","error"],["aria-hidden","false","aria-label","Warning icon","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","aria-label","Arrow icon","fontIcon","chevron_right"]],template:function(o,f){o&1&&S(0,Jt,30,27,"mat-card")(1,Kt,5,1,"mat-card")(2,Xt,6,3,"mat-card")(3,ee,6,9,"div",0),o&2&&(x(0,f.dataSource.state()==="loading"||f.dataSource.state()==="data"?0:-1),i(1),x(1,f.dataSource.state()==="error"?1:-1),i(1),x(2,f.dataSource.state()==="empty"?2:-1))},dependencies:[U,ht,xt,H,q,Q,W,Ft,Dt,kt,Rt,Bt,Ot,Y,X,J,K,bt,St,lt,rt,Pt,It,gt,G,E,nt,et,Z,$,tt,it,at,ct,ft,ut,Tt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let e=r;return e})();export{Ge as PostEditComponent};
