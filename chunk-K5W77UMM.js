import{A as J,C as K,D as I,E as v,F as w,G as x,I as N,J as Q,K as V,L as X,M as b,o as F,p as R,q as A,r as B,s as E,t as L,u as U,v as W,z as H}from"./chunk-OZICKJVT.js";import{N as $,O as z}from"./chunk-KEK4XI2N.js";import{$c as G,J as S,Ma as s,Q as D,Tb as f,Ub as u,Ya as q,_ as l,ac as M,ad as O,bc as C,bd as P,da as r,n as a,sb as y,t as n,tb as m,u as T,ub as d}from"./chunk-4C2EUNB2.js";import{a as c}from"./chunk-Q7L6LLAK.js";var ct=(()=>{class o{constructor(){this.firestore=r(J)}list(t){let e=I(this.firestore,"posts"),i=[Q(t.sort,t.order),N(t.limit)];t.query&&i.push(b(t.sort,">=",t.query.toLowerCase()),b(t.sort,"<=",t.query.toLowerCase()+"\uF8FF"));let _=V(e,...i),tt=a(x(e)).pipe(n(p=>p.size)),et=a(x(_)).pipe(n(p=>{let g=[];return p.forEach(k=>{let ot=k.data();g.push(c({id:k.id},ot))}),g}));return T([tt,et]).pipe(n(([p,g])=>({items:g,totalCount:p})))}create(t){return a(K(I(this.firestore,"posts"),c({},t))).pipe(D(e=>a(w(e))),n(e=>{let i=e.data();return c({id:e.id},i)}))}detail(t){let e=v(this.firestore,"posts",t);return a(w(e)).pipe(n(i=>c({id:t},i.data())))}delete(t){let e=v(this.firestore,"posts",t);return a(H(e)).pipe(n(()=>{}))}patch(t,e){let i=v(this.firestore,"posts",t);return a(X(i,c({},e))).pipe(D(()=>this.detail(t)))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Y=(()=>{class o{constructor(){this.data=r(R),this.dialogRef=r(F)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=q({type:o,selectors:[["app-confirm-dialog"]],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,i){e&1&&(m(0,"h1",0),f(1),d(),m(2,"div",1),f(3),d(),m(4,"div",2)(5,"button",3),f(6),M(7,"translate"),d(),m(8,"button",4),f(9),M(10,"translate"),d()()),e&2&&(s(),u(i.data.title),s(2),u(i.data.content),s(2),y("mat-dialog-close",!1),s(),u(C(7,6,"uni.no")),s(2),y("mat-dialog-close",!0),s(),u(C(10,8,"uni.yes")))},dependencies:[W,B,E,U,L,z,$,P,O],encapsulation:2,changeDetection:0})}}return o})();var Z=(()=>{class o{constructor(){this.dialog=r(A)}open(t,e){return this.dialog.open(Y,{width:"sm",data:{title:t,content:e}}).afterClosed()}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var h=(function(o){return o[o.Delete=0]="Delete",o[o.UnsavedWork=1]="UnsavedWork",o})(h||{}),Ft=(()=>{class o{constructor(){this.confirm=r(Z),this.translate=r(G)}openCustomConfirmDialog(t){let e=this.getTitle(t),i=this.getContent(t);return this.open(e,i)}getTitle(t){switch(t){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(t){switch(t){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(t,e){return this.confirm.open(t,e).pipe(S(),n(i=>!!i))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{ct as a,h as b,Ft as c};
