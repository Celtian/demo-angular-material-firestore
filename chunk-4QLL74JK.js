import{a as ct,b as dt,c as ut}from"./chunk-FHGQRXY7.js";import{a as K,b as X}from"./chunk-O4GNG76L.js";import{a as V,b as z,e as A,f as L,g as h,i as U,j as q,l as T,n as G,o as Q,p as j,q as H,s as W}from"./chunk-ZS5ZASZX.js";import{a as ft,b as Ct,c as ht}from"./chunk-TIY33SNE.js";import{x as $}from"./chunk-O2E32MZF.js";import{a as _t,b as vt,c as xt,e as gt,f as Mt}from"./chunk-UVNKWXXM.js";import{a as bt}from"./chunk-Y6ODKRVF.js";import{e as C,g as F}from"./chunk-CISAA27V.js";import"./chunk-MHSAQJVX.js";import{$ as lt,M as J,N as Y,O as Z,T as tt,U as et,Z as nt,_ as at,aa as mt}from"./chunk-CFWHC2PA.js";import"./chunk-UH5WVR5Y.js";import{a as pt,b as st}from"./chunk-CLPBEJGV.js";import{$c as it,Cb as v,Eb as x,Gb as g,J as O,Ma as t,Ob as E,Pb as N,Tb as s,Ub as d,Vb as P,Ya as k,Zb as y,ac as r,ad as rt,bc as o,bd as ot,cb as B,da as p,ia as u,ja as f,kc as D,mb as b,nb as M,nc as R,ob as S,sb as c,tb as a,ub as l,vb as _}from"./chunk-SQLCH4VP.js";import"./chunk-Q7L6LLAK.js";var St=e=>[e];function Tt(e,w){if(e&1){let n=v();a(0,"button",11),r(1,"translate"),r(2,"translate"),x("click",function(){u(n);let i=g();return f(i.form.controls.title.setValue(""))}),a(3,"mat-icon"),s(4,"close"),l()()}e&2&&(c("matTooltip",o(1,2,"uni.clear")),b("aria-label",o(2,4,"uni.clear")))}function wt(e,w){if(e&1){let n=v();a(0,"button",11),r(1,"translate"),r(2,"translate"),x("click",function(){u(n);let i=g();return f(i.form.controls.body.setValue(""))}),a(3,"mat-icon"),s(4,"close"),l()()}e&2&&(c("matTooltip",o(1,2,"uni.clear")),b("aria-label",o(2,4,"uni.clear")))}function It(e,w){if(e&1&&(a(0,"div",12)(1,"a",13),r(2,"localize"),s(3),r(4,"translate"),l(),_(5,"mat-icon",14),r(6,"translate"),a(7,"a",13),r(8,"localize"),s(9),r(10,"translate"),l()()),e&2){let n=g();t(),c("routerLink",y(15,St,o(2,5,"/"+n.ROUTE_DEFINITION.APP.POSTS))),t(2),d(o(4,7,"breadcrumbs.app.posts")),t(2),b("aria-label",o(6,9,"uni.aria-label.arrow-icon")),t(2),c("routerLink",y(17,St,o(8,11,"/"+n.ROUTE_DEFINITION.APP.POSTS+"/"+ +n.ROUTE_DEFINITION.POSTS.CREATE))),t(2),d(o(10,13,"breadcrumbs.posts.create"))}}var ae=(()=>{class e{constructor(){this.apiService=p(ft),this.breadcrumbsPortalService=p(bt),this.fb=p(H),this.snackBar=p($),this.router=p(tt),this.lr=p(nt),this.translate=p(it),this.confirm=p(ht),this.cdr=p(R),this.ROUTE_DEFINITION=mt,this.portalContent=D.required(C),this.form=this.fb.group({title:new T("",{nonNullable:!0,validators:[h.required,h.min(3)]}),body:new T("",{nonNullable:!0,validators:[h.required,h.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(Ct.UnsavedWork)}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent()),this.cdr.markForCheck()})}ngOnDestroy(){this.portalContent()?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(O()).subscribe({next:n=>{this.form.reset(n),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let m=this.lr.translateRoute("/");this.router.navigate([m])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(n){n.preventDefault(),this.form.reset()}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275cmp=k({type:e,selectors:[["app-post-create"]],viewQuery:function(m,i){m&1&&E(i.portalContent,C,5),m&2&&N()},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(m,i){if(m&1){let I=v();a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s(3),l()(),a(4,"mat-card-content",1)(5,"form",2),x("ngSubmit",function(){return u(I),f(i.onSubmit())})("reset",function(yt){return u(I),f(i.onReset(yt))}),a(6,"mat-form-field",3)(7,"mat-label"),s(8),r(9,"translate"),l(),_(10,"input",4),M(11,Tt,5,6,"button",5),l(),a(12,"mat-form-field",3)(13,"mat-label"),s(14),r(15,"translate"),l(),_(16,"textarea",6,0),r(18,"translate"),M(19,wt,5,6,"button",5),l(),a(20,"div",7)(21,"button",8),s(22),r(23,"translate"),l(),a(24,"button",9),s(25),r(26,"translate"),l()()()()(),B(27,It,11,19,"div",10)}m&2&&(t(3),d(i.form.controls.title.value),t(2),c("formGroup",i.form),t(3),d(o(9,11,"form.post.title.label")),t(3),S(i.form.controls.title.value?11:-1),t(3),d(o(15,13,"form.post.body.label")),t(2),c("placeholder",o(18,15,"form.post.body.placeholder")),t(3),S(i.form.controls.body.value?19:-1),t(2),c("disabled",i.form.pristine),t(),P(" ",o(23,17,"uni.reset")," "),t(2),c("disabled",i.form.pristine||i.form.invalid),t(),P(" ",o(26,19,"uni.submit")," "))},dependencies:[W,G,L,U,q,j,Q,Mt,_t,xt,gt,vt,st,pt,ut,dt,A,V,z,ct,Z,Y,J,X,K,F,C,ot,et,lt,rt,at],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media(min-width:640px){[_nghost-%COMP%]{max-width:640px}}@media(min-width:768px){[_nghost-%COMP%]{max-width:768px}}@media(min-width:1024px){[_nghost-%COMP%]{max-width:1024px}}@media(min-width:1280px){[_nghost-%COMP%]{max-width:1280px}}@media(min-width:1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0})}}return e})();export{ae as PostCreateComponent};
