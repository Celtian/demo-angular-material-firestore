import{c as Ee}from"./chunk-NTJYNLFM.js";import{D as V,H as ke,I as K,J as N,Ja as O,Ka as G,L as d,a as fe,e as j,kb as Z,p as ge,r as me,x as B,ya as q,z as Ae}from"./chunk-UH5WVR5Y.js";import{$ as le,Da as pe,La as p,W as ce,X as ue,c as v,ca as y,ea as m,fa as S,ha as de,i as se,ia as $,j as ae,l as z,lc as H,m as U,na as D,va as he,wa as A}from"./chunk-C2BZCJ46.js";var yt="firebase",St="11.9.1";d(yt,St,"app");var I=new ce("ANGULARFIRE2_VERSION");function X(e,t,n){if(t){if(t.length===1)return t[0];let i=t.filter(a=>a.app===n);if(i.length===1)return i[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var M=(e,t)=>{let n=t?[t]:N(),r=[];return n.forEach(o=>{o.container.getProvider(e).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},T=(function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e})(T||{}),we=H()&&typeof Zone<"u"?T.WARN:T.SILENT;var W=class{zone;delegate;constructor(t,n=ae){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let o=this.zone,i=function(a){o?o.runGuarded(()=>{t.apply(this,[a])}):t.apply(this,[a])};return this.delegate.schedule(i,n,r)}},w=(()=>{class e{outsideAngular;insideAngular;constructor(){let n=m(p);this.outsideAngular=n.runOutsideAngular(()=>new W(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new W(typeof Zone>"u"?void 0:Zone.current,se))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ve=!1;function $t(e,t){!ve&&(we>T.SILENT||H())&&(ve=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),we>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function Dt(e){let t=m(p,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function k(e){let t=m(p,{optional:!0});return t?t.run(()=>e()):e()}var Nt=(e,t,n)=>(...r)=>(t&&setTimeout(t,0),$(n,()=>k(()=>e.apply(void 0,r)))),f=(e,t,n)=>(n||=t?T.WARN:T.VERBOSE,function(){let r,o=arguments,i,a,u;try{i=m(w),a=m(he),u=m(de)}catch{return $t(e,n),e.apply(this,o)}for(let s=0;s<arguments.length;s++)typeof o[s]=="function"&&(t&&(r||=k(()=>a.add())),o[s]=Nt(o[s],r,u));let c=Dt(()=>e.apply(this,o));return t?c instanceof v?c.pipe(U(i.outsideAngular),z(i.insideAngular),Ee(u)):c instanceof Promise?k(()=>{let s=a.add();return new Promise((_,l)=>{c.then(x=>$(u,()=>k(()=>_(x))),x=>$(u,()=>k(()=>l(x)))).finally(s)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:k(()=>c):c instanceof v?c.pipe(U(i.outsideAngular),z(i.insideAngular)):k(()=>c)});var E=class{constructor(t){return t}},P=class{constructor(){return N()}};function Ot(e){return e&&e.length===1?e[0]:new E(K())}var Y=new y("angularfire2._apps"),Wt={provide:E,useFactory:Ot,deps:[[new A,Y]]},Mt={provide:P,deps:[[new A,Y]]};function Ft(e){return(t,n)=>{let r=n.get(pe);d("angularfire",I.full,"core"),d("angularfire",I.full,"app"),d("angular",ue.full,r.toString());let o=t.runOutsideAngular(()=>e(n));return new E(o)}}function wr(e,...t){return S([Wt,Mt,{provide:Y,useFactory:Ft(e),multi:!0,deps:[p,D,w,...t]}])}var vr=f(ke,!0);var Lt=new Map,xt={activated:!1,tokenObservers:[]},zt={initialized:!1,enabled:!1};function h(e){return Lt.get(e)||Object.assign({},xt)}function be(){return zt}var Ut="https://content-firebaseappcheck.googleapis.com/v1";var Ht="exchangeDebugToken",Pe={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Wr=1440*60*1e3;var ee=class{constructor(t,n,r,o,i){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new j,this.pending.promise.catch(n=>{}),await jt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new j,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function jt(e){return new Promise(t=>{setTimeout(t,e)})}var Bt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},g=new me("appCheck","AppCheck",Bt);function _e(e){if(!h(e).activated)throw g.create("use-before-activation",{appName:e.name})}async function ye({url:e,body:t},n){let r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let l=await o.getHeartbeatsHeader();l&&(r["X-Firebase-Client"]=l)}let i={method:"POST",body:JSON.stringify(t),headers:r},a;try{a=await fetch(e,i)}catch(l){throw g.create("fetch-network-error",{originalErrorMessage:l?.message})}if(a.status!==200)throw g.create("fetch-status-error",{httpStatus:a.status});let u;try{u=await a.json()}catch(l){throw g.create("fetch-parse-error",{originalErrorMessage:l?.message})}let c=u.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw g.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let s=Number(c[1])*1e3,_=Date.now();return{token:u.token,expireTimeMillis:_+s,issuedAtTimeMillis:_}}function Se(e,t){let{projectId:n,appId:r,apiKey:o}=e.options;return{url:`${Ut}/projects/${n}/apps/${r}:${Ht}?key=${o}`,body:{debug_token:t}}}var Vt="firebase-app-check-database",Kt=1,te="firebase-app-check-store";var F=null;function qt(){return F||(F=new Promise((e,t)=>{try{let n=indexedDB.open(Vt,Kt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var o;t(g.create("storage-open",{originalErrorMessage:(o=r.target.error)===null||o===void 0?void 0:o.message}))},n.onupgradeneeded=r=>{let o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(te,{keyPath:"compositeKey"})}}}catch(n){t(g.create("storage-open",{originalErrorMessage:n?.message}))}}),F)}function Gt(e,t){return Zt(Xt(e),t)}async function Zt(e,t){let r=(await qt()).transaction(te,"readwrite"),i=r.objectStore(te).put({compositeKey:e,value:t});return new Promise((a,u)=>{i.onsuccess=c=>{a()},r.onerror=c=>{var s;u(g.create("storage-set",{originalErrorMessage:(s=c.target.error)===null||s===void 0?void 0:s.message}))}})}function Xt(e){return`${e.options.appId}-${e.name}`}var C=new Ae("@firebase/app-check");function J(e,t){return ge()?Gt(e,t).catch(n=>{C.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function $e(){return be().enabled}async function De(){let e=be();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Yt={error:"UNKNOWN_ERROR"};function Jt(e){return fe.encodeString(JSON.stringify(e),!1)}async function ne(e,t=!1,n=!1){let r=e.app;_e(r);let o=h(r),i=o.token,a;if(i&&!R(i)&&(o.token=void 0,i=void 0),!i){let s=await o.cachedTokenPromise;s&&(R(s)?i=s:await J(r,void 0))}if(!t&&i&&R(i))return{token:i.token};let u=!1;if($e())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=ye(Se(r,await De()),e.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),u=!0);let s=await o.exchangeTokenPromise;return await J(r,s),o.token=s,{token:s.token}}catch(s){return s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?C.warn(s.message):n&&C.error(s),Q(s)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),u=!0),i=await h(r).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?C.warn(s.message):n&&C.error(s),a=s}let c;return i?a?R(i)?c={token:i.token,internalError:a}:c=Q(a):(c={token:i.token},o.token=i,await J(r,i)):c=Q(a),u&&nn(r,c),c}async function Qt(e){let t=e.app;_e(t);let{provider:n}=h(t);if($e()){let r=await De(),{token:o}=await ye(Se(t,r),e.heartbeatServiceProvider);return{token:o}}else{let{token:r}=await n.getToken();return{token:r}}}function en(e,t,n,r){let{app:o}=e,i=h(o),a={next:n,error:r,type:t};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&R(i.token)){let u=i.token;Promise.resolve().then(()=>{n({token:u.token}),Ce(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Ce(e))}function Ne(e,t){let n=h(e),r=n.tokenObservers.filter(o=>o.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ce(e){let{app:t}=e,n=h(t),r=n.tokenRefresher;r||(r=tn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function tn(e){let{app:t}=e;return new ee(async()=>{let n=h(t),r;if(n.token?r=await ne(e,!0):r=await ne(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=h(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,o=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,o),Math.max(0,r-Date.now())}else return 0},Pe.RETRIAL_MIN_WAIT,Pe.RETRIAL_MAX_WAIT)}function nn(e,t){let n=h(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function R(e){return e.expireTimeMillis-Date.now()>0}function Q(e){return{token:Jt(Yt),error:e}}var re=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=h(this.app);for(let n of t)Ne(this.app,n.next);return Promise.resolve()}};function rn(e,t){return new re(e,t)}function on(e){return{getToken:t=>ne(e,t),getLimitedUseToken:()=>Qt(e),addTokenListener:t=>en(e,"INTERNAL",t),removeTokenListener:t=>Ne(e.app,t)}}var sn="@firebase/app-check",an="0.10.0";var cn="app-check",Re="app-check-internal";function un(){V(new B(cn,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return rn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Re).initialize()})),V(new B(Re,e=>{let t=e.getProvider("app-check").getImmediate();return on(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),d(sn,an)}un();var ln="app-check";var L=class{constructor(){return M(ln)}};var dn=["localhost","0.0.0.0","127.0.0.1"],qr=typeof window<"u"&&dn.includes(window.location.hostname);function Oe(e){return new v(function(t){var n=O(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}var We="auth",b=class{constructor(t){return t}},oe=class{constructor(){return M(We)}};var ie=new y("angularfire2.auth-instances");function hn(e,t){let n=X(We,e,t);return n&&new b(n)}function pn(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new b(r)}}var fn={provide:oe,deps:[[new A,ie]]},gn={provide:b,useFactory:hn,deps:[[new A,ie],E]};function ho(e,...t){return d("angularfire",I.full,"auth"),S([gn,fn,{provide:ie,useFactory:pn(e),multi:!0,deps:[p,D,w,P,[new A,L],...t]}])}var po=f(Oe,!0);var fo=f(Z,!0);var go=f(q,!0,2);var mo=f(G,!0,2);export{I as a,X as b,M as c,w as d,f as e,E as f,P as g,wr as h,vr as i,L as j,b as k,oe as l,ho as m,po as n,fo as o,go as p,mo as q};
