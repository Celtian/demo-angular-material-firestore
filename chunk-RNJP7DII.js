import"./chunk-PVDG46DZ.js";import{a as dt,b as ut,c as ft}from"./chunk-BB2N4PX2.js";import{a as X,b as Y}from"./chunk-AMDGY35O.js";import{a as z,b as A,e as L,f as U,g as v,i as q,j as G,l as I,n as Q,o as j,p as H,q as W,s as J}from"./chunk-56PBU4MC.js";import{a as Ct,b as ht,c as bt}from"./chunk-JKHKVBHF.js";import{x as tt}from"./chunk-MJI6BM56.js";import{a as _t,b as xt,c as gt,e as Mt,f as St}from"./chunk-CL7B6CHS.js";import{a as vt}from"./chunk-2VPSIEJZ.js";import{e as b,g as V}from"./chunk-ZVAGCAJB.js";import"./chunk-Y3LMP6WH.js";import{C as nt,D as lt,E as mt,F as pt,p as K,q as Z,r as $,w as et,x as it}from"./chunk-NTJYNLFM.js";import"./chunk-UH5WVR5Y.js";import{a as st,b as ct}from"./chunk-VXIZCXGT.js";import{Bb as M,Db as S,Ia as t,J as k,Lb as N,Mb as D,Qb as p,Rb as f,Sb as T,Wa as B,Wb as w,Zb as e,_b as i,ab as E,ea as m,ja as C,jb as _,jc as R,ka as h,kb as y,lb as P,mc as F,pb as c,qb as a,rb as n,sb as x,wd as rt,xd as ot,yd as at,zb as g}from"./chunk-C2BZCJ46.js";import"./chunk-Q7L6LLAK.js";var yt=r=>[r];function wt(r,s){if(r&1){let u=g();a(0,"button",11),e(1,"translate"),e(2,"translate"),M("click",function(){C(u);let o=S();return h(o.form.controls.title.setValue(""))}),a(3,"mat-icon"),p(4,"close"),n()()}r&2&&(c("matTooltip",i(1,2,"uni.clear")),_("aria-label",i(2,4,"uni.clear")))}function It(r,s){if(r&1){let u=g();a(0,"button",11),e(1,"translate"),e(2,"translate"),M("click",function(){C(u);let o=S();return h(o.form.controls.body.setValue(""))}),a(3,"mat-icon"),p(4,"close"),n()()}r&2&&(c("matTooltip",i(1,2,"uni.clear")),_("aria-label",i(2,4,"uni.clear")))}function Ot(r,s){if(r&1&&(a(0,"div",12)(1,"a",13),e(2,"localize"),p(3),e(4,"translate"),n(),x(5,"mat-icon",14),e(6,"translate"),a(7,"a",13),e(8,"localize"),p(9),e(10,"translate"),n()()),r&2){let u=S();t(),c("routerLink",w(15,yt,i(2,5,"/"+u.ROUTE_DEFINITION.APP.POSTS))),t(2),f(i(4,7,"breadcrumbs.app.posts")),t(2),_("aria-label",i(6,9,"uni.aria-label.arrow-icon")),t(2),c("routerLink",w(17,yt,i(8,11,"/"+u.ROUTE_DEFINITION.APP.POSTS+"/"+ +u.ROUTE_DEFINITION.POSTS.CREATE))),t(2),f(i(10,13,"breadcrumbs.posts.create"))}}var le=(()=>{let s=class s{constructor(){this.apiService=m(Ct),this.breadcrumbsPortalService=m(vt),this.fb=m(W),this.snackBar=m(tt),this.router=m(et),this.lr=m(nt),this.translate=m(rt),this.confirm=m(bt),this.cdr=m(F),this.ROUTE_DEFINITION=pt,this.portalContent=R.required(b),this.form=this.fb.group({title:new I("",{nonNullable:!0,validators:[v.required,v.min(3)]}),body:new I("",{nonNullable:!0,validators:[v.required,v.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(ht.UnsavedWork)}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent()),this.cdr.markForCheck()})}ngOnDestroy(){this.portalContent()?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(k()).subscribe({next:d=>{this.form.reset(d),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let o=this.lr.translateRoute("/");this.router.navigate([o])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(d){d.preventDefault(),this.form.reset()}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=B({type:s,selectors:[["app-post-create"]],viewQuery:function(o,l){o&1&&N(l.portalContent,b,5),o&2&&D()},decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(o,l){if(o&1){let O=g();a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),p(3),n()(),a(4,"mat-card-content",1)(5,"form",2),M("ngSubmit",function(){return C(O),h(l.onSubmit())})("reset",function(Tt){return C(O),h(l.onReset(Tt))}),a(6,"mat-form-field",3)(7,"mat-label"),p(8),e(9,"translate"),n(),x(10,"input",4),y(11,wt,5,6,"button",5),n(),a(12,"mat-form-field",3)(13,"mat-label"),p(14),e(15,"translate"),n(),x(16,"textarea",6,0),e(18,"translate"),y(19,It,5,6,"button",5),n(),a(20,"div",7)(21,"button",8),p(22),e(23,"translate"),n(),a(24,"button",9),p(25),e(26,"translate"),n()()()()(),E(27,Ot,11,19,"div",10)}o&2&&(t(3),f(l.form.controls.title.value),t(2),c("formGroup",l.form),t(3),f(i(9,11,"form.post.title.label")),t(3),P(l.form.controls.title.value?11:-1),t(3),f(i(15,13,"form.post.body.label")),t(2),c("placeholder",i(18,15,"form.post.body.placeholder")),t(3),P(l.form.controls.body.value?19:-1),t(2),c("disabled",l.form.pristine),t(),T(" ",i(23,17,"uni.reset")," "),t(2),c("disabled",l.form.pristine||l.form.invalid),t(),T(" ",i(26,19,"uni.submit")," "))},dependencies:[J,Q,U,q,G,j,H,St,_t,gt,Mt,xt,ct,st,ft,ut,L,z,A,dt,$,Z,K,Y,X,V,b,at,it,mt,ot,lt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let r=s;return r})();export{le as PostCreateComponent};
