import{c as Ie}from"./chunk-KQXRTZRU.js";import{A as K,E as Te,F as q,G as W,Ga as M,Ha as Z,I as l,a as me,e as B,hb as X,m as Ae,o as ke,u as V,va as G,w as Ee}from"./chunk-KDF2MVN2.js";import{$,$b as fe,Aa as pe,Xa as f,Y as le,ac as ge,ba as A,bc as j,c as R,ca as D,ea as de,fa as N,i as ce,j as ue,ka as O,l as z,m as H,sa as he,ta as k}from"./chunk-FD5RQM4Y.js";import{f as p}from"./chunk-ZY7WU73K.js";var $t="firebase",Dt="11.6.0";l($t,Dt,"app");var P=new fe("ANGULARFIRE2_VERSION");function Y(e,t,n){if(t){if(t.length===1)return t[0];let i=t.filter(c=>c.app===n);if(i.length===1)return i[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var L=(e,t)=>{let n=t?[t]:W(),r=[];return n.forEach(o=>{o.container.getProvider(e).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r},w=function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e}(w||{}),ve=j()&&typeof Zone<"u"?w.WARN:w.SILENT;var F=class{zone;delegate;constructor(t,n=ue){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let o=this.zone,i=function(c){o?o.runGuarded(()=>{t.apply(this,[c])}):t.apply(this,[c])};return this.delegate.schedule(i,n,r)}},v=(()=>{class e{outsideAngular;insideAngular;constructor(){let n=A(f);this.outsideAngular=n.runOutsideAngular(()=>new F(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new F(typeof Zone>"u"?void 0:Zone.current,ce))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ce=!1;function Nt(e,t){!Ce&&(ve>w.SILENT||j())&&(Ce=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ve>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function Ot(e){let t=A(f,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function E(e){let t=A(f,{optional:!0});return t?t.run(()=>e()):e()}var Wt=(e,t,n)=>(...r)=>(t&&setTimeout(t,0),N(n,()=>E(()=>e.apply(void 0,r)))),g=(e,t,n)=>(n||=t?w.WARN:w.VERBOSE,function(){let r,o=arguments,i,c,u;try{i=A(v),c=A(he),u=A(de)}catch{return Nt(e,n),e.apply(this,o)}for(let s=0;s<arguments.length;s++)typeof o[s]=="function"&&(t&&(r||=E(()=>c.add())),o[s]=Wt(o[s],r,u));let a=Ot(()=>e.apply(this,o));return t?a instanceof R?a.pipe(H(i.outsideAngular),z(i.insideAngular),Ie(u)):a instanceof Promise?E(()=>new Promise((s,I)=>{c.run(()=>a).then(C=>N(u,()=>E(()=>s(C))),C=>N(u,()=>E(()=>I(C))))})):typeof a=="function"&&r?function(){return setTimeout(r,0),a.apply(this,arguments)}:E(()=>a):a instanceof R?a.pipe(H(i.outsideAngular),z(i.insideAngular)):E(()=>a)});var T=class{constructor(t){return t}},_=class{constructor(){return W()}};function Mt(e){return e&&e.length===1?e[0]:new T(q())}var J=new $("angularfire2._apps"),Ft={provide:T,useFactory:Mt,deps:[[new k,J]]},Lt={provide:_,deps:[[new k,J]]};function xt(e){return(t,n)=>{let r=n.get(pe);l("angularfire",P.full,"core"),l("angularfire",P.full,"app"),l("angular",ge.full,r.toString());let o=t.runOutsideAngular(()=>e(n));return new T(o)}}function vr(e,...t){return D([Ft,Lt,{provide:J,useFactory:xt(e),multi:!0,deps:[f,O,v,...t]}])}var Cr=g(Te,!0);var Ut=new Map,zt={activated:!1,tokenObservers:[]},Ht={initialized:!1,enabled:!1};function d(e){return Ut.get(e)||Object.assign({},zt)}function Se(){return Ht}var jt="https://content-firebaseappcheck.googleapis.com/v1";var Bt="exchangeDebugToken",Re={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Fr=24*60*60*1e3;var te=class{constructor(t,n,r,o,i){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return p(this,null,function*(){this.stop();try{this.pending=new B,this.pending.promise.catch(n=>{}),yield Vt(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new B,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Vt(e){return new Promise(t=>{setTimeout(t,e)})}var Kt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},m=new ke("appCheck","AppCheck",Kt);function ye(e){if(!d(e).activated)throw m.create("use-before-activation",{appName:e.name})}function $e(r,o){return p(this,arguments,function*({url:e,body:t},n){let i={"Content-Type":"application/json"},c=n.getImmediate({optional:!0});if(c){let h=yield c.getHeartbeatsHeader();h&&(i["X-Firebase-Client"]=h)}let u={method:"POST",body:JSON.stringify(t),headers:i},a;try{a=yield fetch(e,u)}catch(h){throw m.create("fetch-network-error",{originalErrorMessage:h?.message})}if(a.status!==200)throw m.create("fetch-status-error",{httpStatus:a.status});let s;try{s=yield a.json()}catch(h){throw m.create("fetch-parse-error",{originalErrorMessage:h?.message})}let I=s.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw m.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${s.ttl}`});let C=Number(I[1])*1e3,ae=Date.now();return{token:s.token,expireTimeMillis:ae+C,issuedAtTimeMillis:ae}})}function De(e,t){let{projectId:n,appId:r,apiKey:o}=e.options;return{url:`${jt}/projects/${n}/apps/${r}:${Bt}?key=${o}`,body:{debug_token:t}}}var qt="firebase-app-check-database",Gt=1,ne="firebase-app-check-store";var x=null;function Zt(){return x||(x=new Promise((e,t)=>{try{let n=indexedDB.open(qt,Gt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var o;t(m.create("storage-open",{originalErrorMessage:(o=r.target.error)===null||o===void 0?void 0:o.message}))},n.onupgradeneeded=r=>{let o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(ne,{keyPath:"compositeKey"})}}}catch(n){t(m.create("storage-open",{originalErrorMessage:n?.message}))}}),x)}function Xt(e,t){return Yt(Jt(e),t)}function Yt(e,t){return p(this,null,function*(){let r=(yield Zt()).transaction(ne,"readwrite"),i=r.objectStore(ne).put({compositeKey:e,value:t});return new Promise((c,u)=>{i.onsuccess=a=>{c()},r.onerror=a=>{var s;u(m.create("storage-set",{originalErrorMessage:(s=a.target.error)===null||s===void 0?void 0:s.message}))}})})}function Jt(e){return`${e.options.appId}-${e.name}`}var b=new Ee("@firebase/app-check");function Q(e,t){return Ae()?Xt(e,t).catch(n=>{b.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Ne(){return Se().enabled}function Oe(){return p(this,null,function*(){let e=Se();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Qt={error:"UNKNOWN_ERROR"};function en(e){return me.encodeString(JSON.stringify(e),!1)}function re(e,t=!1,n=!1){return p(this,null,function*(){let r=e.app;ye(r);let o=d(r),i=o.token,c;if(i&&!S(i)&&(o.token=void 0,i=void 0),!i){let s=yield o.cachedTokenPromise;s&&(S(s)?i=s:yield Q(r,void 0))}if(!t&&i&&S(i))return{token:i.token};let u=!1;if(Ne())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=$e(De(r,yield Oe()),e.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),u=!0);let s=yield o.exchangeTokenPromise;return yield Q(r,s),o.token=s,{token:s.token}}catch(s){return s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?b.warn(s.message):n&&b.error(s),ee(s)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),u=!0),i=yield d(r).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?b.warn(s.message):n&&b.error(s),c=s}let a;return i?c?S(i)?a={token:i.token,internalError:c}:a=ee(c):(a={token:i.token},o.token=i,yield Q(r,i)):a=ee(c),u&&on(r,a),a})}function tn(e){return p(this,null,function*(){let t=e.app;ye(t);let{provider:n}=d(t);if(Ne()){let r=yield Oe(),{token:o}=yield $e(De(t,r),e.heartbeatServiceProvider);return{token:o}}else{let{token:r}=yield n.getToken();return{token:r}}})}function nn(e,t,n,r){let{app:o}=e,i=d(o),c={next:n,error:r,type:t};if(i.tokenObservers=[...i.tokenObservers,c],i.token&&S(i.token)){let u=i.token;Promise.resolve().then(()=>{n({token:u.token}),_e(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>_e(e))}function We(e,t){let n=d(e),r=n.tokenObservers.filter(o=>o.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function _e(e){let{app:t}=e,n=d(t),r=n.tokenRefresher;r||(r=rn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function rn(e){let{app:t}=e;return new te(()=>p(null,null,function*(){let n=d(t),r;if(n.token?r=yield re(e,!0):r=yield re(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=d(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,o=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,o),Math.max(0,r-Date.now())}else return 0},Re.RETRIAL_MIN_WAIT,Re.RETRIAL_MAX_WAIT)}function on(e,t){let n=d(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function S(e){return e.expireTimeMillis-Date.now()>0}function ee(e){return{token:en(Qt),error:e}}var oe=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=d(this.app);for(let n of t)We(this.app,n.next);return Promise.resolve()}};function sn(e,t){return new oe(e,t)}function an(e){return{getToken:t=>re(e,t),getLimitedUseToken:()=>tn(e),addTokenListener:t=>nn(e,"INTERNAL",t),removeTokenListener:t=>We(e.app,t)}}var cn="@firebase/app-check",un="0.8.13";var ln="app-check",be="app-check-internal";function dn(){K(new V(ln,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return sn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(be).initialize()})),K(new V(be,e=>{let t=e.getProvider("app-check").getImmediate();return an(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),l(cn,un)}dn();var hn="app-check";var U=class{constructor(){return L(hn)}};var pn=["localhost","0.0.0.0","127.0.0.1"],Xr=typeof window<"u"&&pn.includes(window.location.hostname);function Me(e){return new R(function(t){var n=M(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}var Fe="auth",y=class{constructor(t){return t}},ie=class{constructor(){return L(Fe)}};var se=new $("angularfire2.auth-instances");function fn(e,t){let n=Y(Fe,e,t);return n&&new y(n)}function gn(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new y(r)}}var mn={provide:ie,deps:[[new k,se]]},An={provide:y,useFactory:fn,deps:[[new k,se],T]};function go(e,...t){return l("angularfire",P.full,"auth"),D([An,mn,{provide:se,useFactory:gn(e),multi:!0,deps:[f,O,v,_,[new k,U],...t]}])}var mo=g(Me,!0);var Ao=g(X,!0);var ko=g(G,!0,2);var Eo=g(Z,!0,2);export{P as a,Y as b,L as c,v as d,g as e,T as f,_ as g,vr as h,Cr as i,U as j,y as k,ie as l,go as m,mo as n,Ao as o,ko as p,Eo as q};
