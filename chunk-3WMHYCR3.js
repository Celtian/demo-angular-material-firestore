import{A as K,C as N,D as x,E as D,F as b,G as j,I as Q,J as V,K as X,L as Y,M as k,o as B,p as E,q as A,r as L,s as S,t as U,u as W,v as $,z as J}from"./chunk-7TOXKYGZ.js";import{q as z,r as G}from"./chunk-7WN6I5YD.js";import{Fa as c,J as F,Nb as u,Ob as h,Qa as R,R as y,Wb as I,Xb as w,Y as d,ba as n,mb as M,n as s,nb as m,ob as f,t as a,u as q,vd as O,wd as P,xd as H}from"./chunk-VHH5P5ML.js";import{a as l}from"./chunk-Q7L6LLAK.js";var lt=(()=>{let e=class e{constructor(){this.firestore=n(K)}list(t){let o=x(this.firestore,"posts"),r=[V(t.sort,t.order),Q(t.limit)];t.query&&r.push(k(t.sort,">=",t.query.toLowerCase()),k(t.sort,"<=",t.query.toLowerCase()+"\uF8FF"));let tt=X(o,...r),et=s(j(o)).pipe(a(p=>p.size)),ot=s(j(tt)).pipe(a(p=>{let v=[];return p.forEach(C=>{let it=C.data();v.push(l({id:C.id},it))}),v}));return q([et,ot]).pipe(a(([p,v])=>({items:v,totalCount:p})))}create(t){return s(N(x(this.firestore,"posts"),l({},t))).pipe(y(o=>s(b(o))),a(o=>{let r=o.data();return l({id:o.id},r)}))}detail(t){let o=D(this.firestore,"posts",t);return s(b(o)).pipe(a(r=>l({id:t},r.data())))}delete(t){let o=D(this.firestore,"posts",t);return s(J(o)).pipe(a(()=>{}))}patch(t,o){let r=D(this.firestore,"posts",t);return s(Y(r,l({},o))).pipe(y(()=>this.detail(t)))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Z=(()=>{let e=class e{constructor(){this.data=n(E),this.dialogRef=n(B)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=R({type:e,selectors:[["app-confirm-dialog"]],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(o,r){o&1&&(m(0,"h1",0),u(1),f(),m(2,"div",1),u(3),f(),m(4,"div",2)(5,"button",3),u(6),I(7,"translate"),f(),m(8,"button",4),u(9),I(10,"translate"),f()()),o&2&&(c(),h(r.data.title),c(2),h(r.data.content),c(2),M("mat-dialog-close",!1),c(),h(w(7,6,"uni.no")),c(2),M("mat-dialog-close",!0),c(),h(w(10,8,"uni.yes")))},dependencies:[$,L,S,W,U,G,z,H,P],encapsulation:2,changeDetection:0});let i=e;return i})();var _=(()=>{let e=class e{constructor(){this.dialog=n(A)}open(t,o){return this.dialog.open(Z,{width:"sm",data:{title:t,content:o}}).afterClosed()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var g=(function(i){return i[i.Delete=0]="Delete",i[i.UnsavedWork=1]="UnsavedWork",i})(g||{}),Bt=(()=>{let e=class e{constructor(){this.confirm=n(_),this.translate=n(O)}openCustomConfirmDialog(t){let o=this.getTitle(t),r=this.getContent(t);return this.open(o,r)}getTitle(t){switch(t){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(t){switch(t){case g.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case g.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(t,o){return this.confirm.open(t,o).pipe(F(),a(r=>!!r))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{lt as a,g as b,Bt as c};
