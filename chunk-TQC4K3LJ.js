import{a as ft,b as ht,c as Ct}from"./chunk-54Q6HFBA.js";import{a as tt,b as et}from"./chunk-RIZW4TRM.js";import{a as G,b as Q,e as q,g as H,h as C,j as W,k as J,m as k,o as K,p as X,q as Y,r as Z,t as $}from"./chunk-DED2DYRV.js";import{a as vt,b as bt,c as _t}from"./chunk-LVDNW732.js";import{w as it}from"./chunk-4CYMFQ55.js";import{a as gt,b as Mt,c as It,e as St,f as yt}from"./chunk-XU3K4MMF.js";import{a as xt}from"./chunk-JADWWDIP.js";import{e as g,g as j}from"./chunk-KZZ6WVID.js";import"./chunk-DFMYIP6B.js";import{a as A,b as z,c as L,d as U,i as rt,j as ot,o as lt,p as pt,q as st,r as ct}from"./chunk-FE6K5YNT.js";import"./chunk-DSYF4QHV.js";import{a as dt,b as ut}from"./chunk-VUZ3B7TP.js";import{Ab as w,Eb as N,Gb as O,Id as nt,Jb as r,Jd as at,Kb as o,Kd as mt,Ma as t,Na as p,O as E,Ob as R,Pa as D,Pb as F,Rb as V,Ya as y,Za as d,db as v,eb as P,ia as B,ib as a,jb as m,kb as b,na as I,oa as S,ob as T,sb as _,ub as x,yb as s,zb as h}from"./chunk-NRVZXI7R.js";import"./chunk-OYL2YZNW.js";function Et(i,c){if(i&1){let u=T();a(0,"button",11),_("click",function(){I(u);let e=x();return S(e.form.controls.title.setValue(""))}),r(1,"translate"),r(2,"translate"),a(3,"mat-icon"),s(4,"close"),m()()}i&2&&(d("matTooltip",o(2,4,"uni.clear")),y("aria-label",o(1,2,"uni.clear")))}function Bt(i,c){if(i&1){let u=T();a(0,"button",11),_("click",function(){I(u);let e=x();return S(e.form.controls.body.setValue(""))}),r(1,"translate"),r(2,"translate"),a(3,"mat-icon"),s(4,"close"),m()()}i&2&&(d("matTooltip",o(2,4,"uni.clear")),y("aria-label",o(1,2,"uni.clear")))}var Pt=i=>[i];function Dt(i,c){if(i&1&&(a(0,"div",12)(1,"a",13),r(2,"localize"),s(3),r(4,"translate"),m(),b(5,"mat-icon",14),a(6,"a",13),r(7,"localize"),s(8),r(9,"translate"),m()()),i&2){let u=x();t(1),d("routerLink",O(12,Pt,o(2,4,"/"+u.ROUTE_DEFINITION.APP.POSTS))),t(2),h(o(4,6,"breadcrumbs.app.posts")),t(3),d("routerLink",O(14,Pt,o(7,8,"/"+u.ROUTE_DEFINITION.APP.POSTS+"/"+ +u.ROUTE_DEFINITION.POSTS.CREATE))),t(2),h(o(9,10,"breadcrumbs.posts.create"))}}var de=(()=>{let c=class c{constructor(l,e,n,f,M,Tt,wt,Ot,kt){this.apiService=l,this.breadcrumbsPortalService=e,this.fb=n,this.snackBar=f,this.router=M,this.lr=Tt,this.translate=wt,this.confirm=Ot,this.cdr=kt,this.ROUTE_DEFINITION=ct,this.form=this.fb.group({title:new k("",{nonNullable:!0,validators:[C.required,C.min(3)]}),body:new k("",{nonNullable:!0,validators:[C.required,C.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(vt.UnsavedWork)}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent),this.cdr.markForCheck()})}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(E()).subscribe({next:l=>{this.form.reset(l),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let e=this.lr.translateRoute("/");this.router.navigate([e])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(l){l.preventDefault(),this.form.reset()}};c.\u0275fac=function(e){return new(e||c)(p(_t),p(xt),p(Z),p(it),p(rt),p(lt),p(nt),p(bt),p(D))},c.\u0275cmp=B({type:c,selectors:[["app-post-create"]],viewQuery:function(e,n){if(e&1&&F(g,7),e&2){let f;R(f=V())&&(n.portalContent=f.first)}},standalone:!0,features:[N],decls:28,vars:21,consts:[[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"formGroup","ngSubmit","reset"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],["autosize","cdkTextareaAutosize"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"matTooltip","click"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","aria-label","Arrow icon","fontIcon","chevron_right"]],template:function(e,n){e&1&&(a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s(3),m()(),a(4,"mat-card-content",0)(5,"form",1),_("ngSubmit",function(){return n.onSubmit()})("reset",function(M){return n.onReset(M)}),a(6,"mat-form-field",2)(7,"mat-label"),s(8),r(9,"translate"),m(),b(10,"input",3),v(11,Et,5,6,"button",4),m(),a(12,"mat-form-field",2)(13,"mat-label"),s(14),r(15,"translate"),m(),b(16,"textarea",5,6),r(18,"translate"),v(19,Bt,5,6,"button",4),m(),a(20,"div",7)(21,"button",8),s(22),r(23,"translate"),m(),a(24,"button",9),s(25),r(26,"translate"),m()()()()(),v(27,Dt,10,16,"div",10)),e&2&&(t(3),h(n.form.controls.title.value),t(2),d("formGroup",n.form),t(3),h(o(9,11,"form.post.title.label")),t(3),P(11,n.form.controls.title.value?11:-1),t(3),h(o(15,13,"form.post.body.label")),t(2),d("placeholder",o(18,15,"form.post.body.placeholder")),t(3),P(19,n.form.controls.body.value?19:-1),t(2),d("disabled",n.form.pristine),t(1),w(" ",o(23,17,"uni.reset")," "),t(2),d("disabled",n.form.pristine||n.form.invalid),t(1),w(" ",o(26,19,"uni.submit")," "))},dependencies:[$,K,H,W,J,X,Y,yt,gt,It,St,Mt,ut,dt,Ct,ht,q,G,Q,ft,U,z,A,L,et,tt,j,g,mt,at,ot,st,pt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let i=c;return i})();export{de as PostCreateComponent};
