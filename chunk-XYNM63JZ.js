import{B as H,C as J,E as K,F as I,G as v,H as w,I as x,K as N,L as Q,M as V,N as X,O as b,q as F,r as R,s as A,t as B,u as E,v as L,w as U,x as W}from"./chunk-ZBDPOQXV.js";import{N as $,O as z}from"./chunk-RETWLVMZ.js";import{L as S,Oa as s,S as D,Vb as f,Wb as u,_a as q,aa as l,cc as M,cd as G,dc as C,dd as O,ed as P,fa as r,p as a,ub as y,v as n,vb as m,w as T,wb as d}from"./chunk-QJ5U7Y23.js";import{a as c}from"./chunk-Q7L6LLAK.js";var ct=(()=>{class o{constructor(){this.firestore=r(J)}list(t){let e=I(this.firestore,"posts"),i=[Q(t.sort,t.order),N(t.limit)];t.query&&i.push(b(t.sort,">=",t.query.toLowerCase()),b(t.sort,"<=",t.query.toLowerCase()+"\uF8FF"));let _=V(e,...i),tt=a(x(e)).pipe(n(p=>p.size)),et=a(x(_)).pipe(n(p=>{let g=[];return p.forEach(k=>{let ot=k.data();g.push(c({id:k.id},ot))}),g}));return T([tt,et]).pipe(n(([p,g])=>({items:g,totalCount:p})))}create(t){return a(K(I(this.firestore,"posts"),c({},t))).pipe(D(e=>a(w(e))),n(e=>{let i=e.data();return c({id:e.id},i)}))}detail(t){let e=v(this.firestore,"posts",t);return a(w(e)).pipe(n(i=>c({id:t},i.data())))}delete(t){let e=v(this.firestore,"posts",t);return a(H(e)).pipe(n(()=>{}))}patch(t,e){let i=v(this.firestore,"posts",t);return a(X(i,c({},e))).pipe(D(()=>this.detail(t)))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Y=(()=>{class o{constructor(){this.data=r(R),this.dialogRef=r(F)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=q({type:o,selectors:[["app-confirm-dialog"]],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,i){e&1&&(m(0,"h1",0),f(1),d(),m(2,"div",1),f(3),d(),m(4,"div",2)(5,"button",3),f(6),M(7,"translate"),d(),m(8,"button",4),f(9),M(10,"translate"),d()()),e&2&&(s(),u(i.data.title),s(2),u(i.data.content),s(2),y("mat-dialog-close",!1),s(),u(C(7,6,"uni.no")),s(2),y("mat-dialog-close",!0),s(),u(C(10,8,"uni.yes")))},dependencies:[W,B,E,U,L,z,$,P,O],encapsulation:2,changeDetection:0})}}return o})();var Z=(()=>{class o{constructor(){this.dialog=r(A)}open(t,e){return this.dialog.open(Y,{width:"sm",data:{title:t,content:e}}).afterClosed()}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var h=(function(o){return o[o.Delete=0]="Delete",o[o.UnsavedWork=1]="UnsavedWork",o})(h||{}),Ft=(()=>{class o{constructor(){this.confirm=r(Z),this.translate=r(G)}openCustomConfirmDialog(t){let e=this.getTitle(t),i=this.getContent(t);return this.open(e,i)}getTitle(t){switch(t){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(t){switch(t){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(t,e){return this.confirm.open(t,e).pipe(S(),n(i=>!!i))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{ct as a,h as b,Ft as c};
