import{A as N,C as Q,D as j,E as v,F as w,G as x,I as V,J as X,K as Y,L as Z,M as b,o as A,p as B,q as E,r as L,s as U,t as W,u as $,v as z,z as K}from"./chunk-H25GNK6C.js";import{a as G,d as O}from"./chunk-MUDSTJWP.js";import{Jd as P,Ka as a,Kd as H,La as y,Ld as J,O as q,Ob as f,Pb as u,W as D,Wb as M,Xa as R,Xb as C,ba as c,ga as p,ha as F,lb as I,o as n,tb as d,u as r,ub as m,v as S}from"./chunk-D6FEYKHW.js";import{a as s}from"./chunk-ZY7WU73K.js";var _=(()=>{class i{constructor(t,e){this.data=t,this.dialogRef=e}static{this.\u0275fac=function(e){return new(e||i)(y(B),y(A))}}static{this.\u0275cmp=R({type:i,selectors:[["app-confirm-dialog"]],decls:11,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,o){e&1&&(d(0,"h1",0),f(1),m(),d(2,"div",1),f(3),m(),d(4,"div",2)(5,"button",3),f(6),M(7,"translate"),m(),d(8,"button",4),f(9),M(10,"translate"),m()()),e&2&&(a(),u(o.data.title),a(2),u(o.data.content),a(2),I("mat-dialog-close",!1),a(),u(C(7,6,"uni.no")),a(2),I("mat-dialog-close",!0),a(),u(C(10,8,"uni.yes")))},dependencies:[z,L,U,$,W,O,G,J,H],encapsulation:2,changeDetection:0})}}return i})();var tt=(()=>{class i{constructor(t){this.dialog=t}open(t,e){return this.dialog.open(_,{width:"sm",data:{title:t,content:e}}).afterClosed()}static{this.\u0275fac=function(e){return new(e||i)(p(E))}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var h=function(i){return i[i.Delete=0]="Delete",i[i.UnsavedWork=1]="UnsavedWork",i}(h||{}),ht=(()=>{class i{constructor(t,e){this.confirm=t,this.translate=e}openCustomConfirmDialog(t){let e=this.getTitle(t),o=this.getContent(t);return this.open(e,o)}getTitle(t){switch(t){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.title");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.title");default:return this.translate.instant("custom-confirm-dialog.default.title")}}getContent(t){switch(t){case h.Delete:return this.translate.instant("custom-confirm-dialog.delete-post.content");case h.UnsavedWork:return this.translate.instant("custom-confirm-dialog.unsaved-work.content");default:return this.translate.instant("custom-confirm-dialog.default.content")}}open(t,e){return this.confirm.open(t,e).pipe(q(),r(o=>!!o))}static{this.\u0275fac=function(e){return new(e||i)(p(tt),p(P))}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ct=(()=>{class i{constructor(){this.firestore=F(N)}list(t){let e=j(this.firestore,"posts"),o=[X(t.sort,t.order),V(t.limit)];t.query&&o.push(b(t.sort,">=",t.query.toLowerCase()),b(t.sort,"<=",t.query.toLowerCase()+"\uF8FF"));let et=Y(e,...o),it=n(x(e)).pipe(r(l=>l.size)),ot=n(x(et)).pipe(r(l=>{let g=[];return l.forEach(T=>{let rt=T.data();g.push(s({id:T.id},rt))}),g}));return S([it,ot]).pipe(r(([l,g])=>({items:g,totalCount:l})))}create(t){return n(Q(j(this.firestore,"posts"),s({},t))).pipe(D(e=>n(w(e))),r(e=>{let o=e.data();return s({id:e.id},o)}))}detail(t){let e=v(this.firestore,"posts",t);return n(w(e)).pipe(r(o=>s({id:t},o.data())))}delete(t){let e=v(this.firestore,"posts",t);return n(K(e)).pipe(r(()=>{}))}patch(t,e){let o=v(this.firestore,"posts",t);return n(Z(o,s({},e))).pipe(D(()=>this.detail(t)))}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{h as a,ht as b,Ct as c};
