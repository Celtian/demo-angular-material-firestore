import{a as ft,b as Ct,c as ht}from"./chunk-GLICWWDU.js";import{a as tt,b as et}from"./chunk-UQPWWZFY.js";import{a as G,b as Q,e as q,g as H,h,j as W,k as J,m as O,o as K,p as X,q as Y,r as Z,t as $}from"./chunk-OVDYK7HB.js";import{a as vt,b as bt,c as _t}from"./chunk-JFJV4AAO.js";import{x as it}from"./chunk-JPBQN4UX.js";import"./chunk-EJJBCPAK.js";import{a as gt,b as Mt,c as It,e as St,f as yt}from"./chunk-LHZYE4ZN.js";import{a as xt}from"./chunk-SB3RIIAL.js";import{e as I,g as j}from"./chunk-Q2ZOPZDE.js";import"./chunk-RUSSE3MO.js";import{a as z,b as A,c as L,d as U,i as rt,j as ot,o as mt,p as pt,q as st,r as ct}from"./chunk-3S5AQKTW.js";import"./chunk-SU2L6IEG.js";import{a as dt,b as ut}from"./chunk-EJ4QRQ47.js";import{Bb as D,Cb as N,Db as R,Dd as at,Ed as nt,Fd as lt,Hb as s,Ib as u,Jb as T,Lb as F,Na as e,Nb as w,O as B,Oa as p,Qb as o,Rb as a,ab as v,bc as V,db as b,eb as c,ib as P,ka as E,mb as l,nb as m,ob as _,sb as x,ua as f,va as C,vb as g,xb as M}from"./chunk-GT72LYG7.js";import"./chunk-ZY7WU73K.js";var Pt=r=>[r];function kt(r,k){if(r&1){let i=x();l(0,"button",11),o(1,"translate"),o(2,"translate"),g("click",function(){f(i);let t=M();return C(t.form.controls.title.setValue(""))}),l(3,"mat-icon"),s(4,"close"),m()()}r&2&&(c("matTooltip",a(1,2,"uni.clear")),b("aria-label",a(2,4,"uni.clear")))}function Bt(r,k){if(r&1){let i=x();l(0,"button",11),o(1,"translate"),o(2,"translate"),g("click",function(){f(i);let t=M();return C(t.form.controls.body.setValue(""))}),l(3,"mat-icon"),s(4,"close"),m()()}r&2&&(c("matTooltip",a(1,2,"uni.clear")),b("aria-label",a(2,4,"uni.clear")))}function Et(r,k){if(r&1&&(l(0,"div",12)(1,"a",13),o(2,"localize"),s(3),o(4,"translate"),m(),_(5,"mat-icon",14),o(6,"translate"),l(7,"a",13),o(8,"localize"),s(9),o(10,"translate"),m()()),r&2){let i=M();e(),c("routerLink",w(15,Pt,a(2,5,"/"+i.ROUTE_DEFINITION.APP.POSTS))),e(2),u(a(4,7,"breadcrumbs.app.posts")),e(2),b("aria-label",a(6,9,"uni.aria-label.arrow-icon")),e(2),c("routerLink",w(17,Pt,a(8,11,"/"+i.ROUTE_DEFINITION.APP.POSTS+"/"+ +i.ROUTE_DEFINITION.POSTS.CREATE))),e(2),u(a(10,13,"breadcrumbs.posts.create"))}}var ce=(()=>{class r{constructor(i,n,t,d,S,y,Tt,wt,Ot){this.apiService=i,this.breadcrumbsPortalService=n,this.fb=t,this.snackBar=d,this.router=S,this.lr=y,this.translate=Tt,this.confirm=wt,this.cdr=Ot,this.ROUTE_DEFINITION=ct,this.form=this.fb.group({title:new O("",{nonNullable:!0,validators:[h.required,h.min(3)]}),body:new O("",{nonNullable:!0,validators:[h.required,h.min(3)]})})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(vt.UnsavedWork)}ngOnInit(){setTimeout(()=>{this.breadcrumbsPortalService.setPortal(this.portalContent),this.cdr.markForCheck()})}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.create(this.form.value).pipe(B()).subscribe({next:i=>{this.form.reset(i),this.snackBar.open(this.translate.instant("response.create.success"),this.translate.instant("uni.close"));let n=this.lr.translateRoute("/");this.router.navigate([n])},error:()=>{this.snackBar.open(this.translate.instant("response.create.failed"),this.translate.instant("uni.close"))}})}onReset(i){i.preventDefault(),this.form.reset()}static{this.\u0275fac=function(n){return new(n||r)(p(_t),p(xt),p(Z),p(it),p(rt),p(mt),p(at),p(bt),p(V))}}static{this.\u0275cmp=E({type:r,selectors:[["app-post-create"]],viewQuery:function(n,t){if(n&1&&D(I,7),n&2){let d;N(d=R())&&(t.portalContent=d.first)}},standalone:!0,features:[F],decls:28,vars:21,consts:[["autosize","cdkTextareaAutosize"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"ngSubmit","reset","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["matSuffix","","mat-icon-button","",3,"click","matTooltip"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","fontIcon","chevron_right"]],template:function(n,t){if(n&1){let d=x();l(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s(3),m()(),l(4,"mat-card-content",1)(5,"form",2),g("ngSubmit",function(){return f(d),C(t.onSubmit())})("reset",function(y){return f(d),C(t.onReset(y))}),l(6,"mat-form-field",3)(7,"mat-label"),s(8),o(9,"translate"),m(),_(10,"input",4),v(11,kt,5,6,"button",5),m(),l(12,"mat-form-field",3)(13,"mat-label"),s(14),o(15,"translate"),m(),_(16,"textarea",6,0),o(18,"translate"),v(19,Bt,5,6,"button",5),m(),l(20,"div",7)(21,"button",8),s(22),o(23,"translate"),m(),l(24,"button",9),s(25),o(26,"translate"),m()()()()(),v(27,Et,11,19,"div",10)}n&2&&(e(3),u(t.form.controls.title.value),e(2),c("formGroup",t.form),e(3),u(a(9,11,"form.post.title.label")),e(3),P(t.form.controls.title.value?11:-1),e(3),u(a(15,13,"form.post.body.label")),e(2),c("placeholder",a(18,15,"form.post.body.placeholder")),e(3),P(t.form.controls.body.value?19:-1),e(2),c("disabled",t.form.pristine),e(),T(" ",a(23,17,"uni.reset")," "),e(2),c("disabled",t.form.pristine||t.form.invalid),e(),T(" ",a(26,19,"uni.submit")," "))},dependencies:[$,K,H,W,J,X,Y,yt,gt,It,St,Mt,ut,dt,ht,Ct,q,G,Q,ft,U,A,z,L,et,tt,j,I,lt,nt,ot,st,pt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0})}}return r})();export{ce as PostCreateComponent};
